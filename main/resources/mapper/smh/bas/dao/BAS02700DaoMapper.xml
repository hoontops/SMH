<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper 
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="smh.bas.dao.BAS02700Dao">

    <select id="selectItemList" parameterType="map" resultType="hashmap">
    /* smh.bas.dao.BAS02700Dao.selectItemList */    
WITH ITEMSPECDETAIL AS
		 (SELECT X.ITEMID
		        ,X.ITEMVERSION
		         --외층동도금
		        ,X.COPPER4_CUSTOMER_LOWER
		        ,X.COPPER4_CUSTOMER
		        ,X.COPPER4_CUSTOMER_UPPER
		        ,CASE
		             WHEN X.COPPER4_SEGMENT2 IS NULL THEN
		              X.COPPER4_SEGMENT1
		             ELSE
		              X.COPPER4_SEGMENT2
		         END AS COPPER4_SEGMENT
		         --내층동도금1
		        ,X.COPPER1_CUSTOMER_LOWER
		        ,X.COPPER1_CUSTOMER
		        ,X.COPPER1_CUSTOMER_UPPER
		        ,CASE
		             WHEN X.COPPER1_SEGMENT2 IS NULL THEN
		              X.COPPER1_SEGMENT1
		             ELSE
		              X.COPPER1_SEGMENT2
		         END AS COPPER1_SEGMENT
		         --내층동도금2
		        ,X.COPPER2_CUSTOMER_LOWER
		        ,X.COPPER2_CUSTOMER
		        ,X.COPPER2_CUSTOMER_UPPER
		        ,CASE
		             WHEN X.COPPER2_SEGMENT2 IS NULL THEN
		              X.COPPER2_SEGMENT1
		             ELSE
		              X.COPPER2_SEGMENT2
		         END AS COPPER2_SEGMENT
		         --내층동도금3
		        ,X.COPPER3_CUSTOMER_LOWER
		        ,X.COPPER3_CUSTOMER
		        ,X.COPPER3_CUSTOMER_UPPER
		        ,CASE
		             WHEN X.COPPER3_SEGMENT2 IS NULL THEN
		              X.COPPER3_SEGMENT1
		             ELSE
		              X.COPPER3_SEGMENT2
		         END AS COPPER3_SEGMENT
		         --표면도금1
		        ,X.SURFACE1_AREA1_LOWER
		        ,X.SURFACE1_AREA1_UPPER
		        ,X.SURFACE1_AREA2_LOWER
		        ,X.SURFACE1_AREA2_UPPER
		        ,X.SURFACE1_SEGMENT
		         --표면도금2
		        ,X.SURFACE2_AREA1_LOWER
		        ,X.SURFACE2_AREA1_UPPER
		        ,X.SURFACE2_AREA2_LOWER
		        ,X.SURFACE2_AREA2_UPPER
		        ,X.SURFACE2_SEGMENT
		         --표면도금3
		        ,X.SURFACE3_AREA1_LOWER
		        ,X.SURFACE3_AREA1_UPPER
		        ,X.SURFACE3_AREA2_LOWER
		        ,X.SURFACE3_AREA2_UPPER
		        ,X.SURFACE3_SEGMENT
		         --내층회로
		        ,X.INNERLAYERCIRCUIT_WIDTH
		        ,X.INNERLAYERCIRCUIT_GAP
		         --외층회로
		        ,X.OUTERLAYERCIRCUIT_WIDTH
		        ,X.OUTERLAYERCIRCUIT_GAP
		         --OLB회로
		        ,X.OLBCIRCUIT_WIDTH
		        ,X.OLBCIRCUIT_GAP
		         --MVH
		        ,X.MVH_LAND
		        ,X.MVH_HOLE
		         --IVH
		        ,X.IVH_LAND
		        ,X.IVH_HOLE
		         --PTH
		        ,X.PTH_LAND
		        ,X.PTH_HOLE
		         --연신율1
		        ,X.ELONGATIONCHECK1
		        ,X.ELONGATION1
		        ,X.PITCHBEFORE1
		         --연신율2
		        ,X.ELONGATIONCHECK2
		        ,X.ELONGATION2
		        ,X.PITCHBEFORE2
  FROM   (SELECT PRODS.ITEMID AS ITEMID
                ,PRODS.ITEMVERSION AS ITEMVERSION
                ,MAX(PRODS.COPPER4_CUSTOMER_LOWER) AS COPPER4_CUSTOMER_LOWER
                ,MAX(PRODS.COPPER4_CUSTOMER) AS COPPER4_CUSTOMER
                ,MAX(PRODS.COPPER4_CUSTOMER_UPPER) AS COPPER4_CUSTOMER_UPPER
                ,MAX(PRODS.COPPER4_SEGMENT1) AS COPPER4_SEGMENT1
                ,MAX(PRODS.COPPER4_SEGMENT2) AS COPPER4_SEGMENT2
                ,MAX(PRODS.COPPER1_CUSTOMER_LOWER) AS COPPER1_CUSTOMER_LOWER
                ,MAX(PRODS.COPPER1_CUSTOMER) AS COPPER1_CUSTOMER
                ,MAX(PRODS.COPPER1_CUSTOMER_UPPER) AS COPPER1_CUSTOMER_UPPER
                ,MAX(PRODS.COPPER1_SEGMENT1) AS COPPER1_SEGMENT1
                ,MAX(PRODS.COPPER1_SEGMENT2) AS COPPER1_SEGMENT2
                ,MAX(PRODS.COPPER2_CUSTOMER_LOWER) AS COPPER2_CUSTOMER_LOWER
                ,MAX(PRODS.COPPER2_CUSTOMER) AS COPPER2_CUSTOMER
                ,MAX(PRODS.COPPER2_CUSTOMER_UPPER) AS COPPER2_CUSTOMER_UPPER
                ,MAX(PRODS.COPPER2_SEGMENT1) AS COPPER2_SEGMENT1
                ,MAX(PRODS.COPPER2_SEGMENT2) AS COPPER2_SEGMENT2
                ,MAX(PRODS.COPPER3_CUSTOMER_LOWER) AS COPPER3_CUSTOMER_LOWER
                ,MAX(PRODS.COPPER3_CUSTOMER) AS COPPER3_CUSTOMER
                ,MAX(PRODS.COPPER3_CUSTOMER_UPPER) AS COPPER3_CUSTOMER_UPPER
                ,MAX(PRODS.COPPER3_SEGMENT1) AS COPPER3_SEGMENT1
                ,MAX(PRODS.COPPER3_SEGMENT2) AS COPPER3_SEGMENT2
                ,MAX(PRODS.SURFACE1_AREA1_LOWER) AS SURFACE1_AREA1_LOWER
                ,MAX(PRODS.SURFACE1_AREA1_UPPER) AS SURFACE1_AREA1_UPPER
                ,MAX(PRODS.SURFACE1_AREA2_LOWER) AS SURFACE1_AREA2_LOWER
                ,MAX(PRODS.SURFACE1_AREA2_UPPER) AS SURFACE1_AREA2_UPPER
                ,MAX(PRODS.SURFACE1_SEGMENT) AS SURFACE1_SEGMENT
                ,MAX(PRODS.SURFACE2_AREA1_LOWER) AS SURFACE2_AREA1_LOWER
                ,MAX(PRODS.SURFACE2_AREA1_UPPER) AS SURFACE2_AREA1_UPPER
                ,MAX(PRODS.SURFACE2_AREA2_LOWER) AS SURFACE2_AREA2_LOWER
                ,MAX(PRODS.SURFACE2_AREA2_UPPER) AS SURFACE2_AREA2_UPPER
                ,MAX(PRODS.SURFACE2_SEGMENT) AS SURFACE2_SEGMENT
                ,MAX(PRODS.SURFACE3_AREA1_LOWER) AS SURFACE3_AREA1_LOWER
                ,MAX(PRODS.SURFACE3_AREA1_UPPER) AS SURFACE3_AREA1_UPPER
                ,MAX(PRODS.SURFACE3_AREA2_LOWER) AS SURFACE3_AREA2_LOWER
                ,MAX(PRODS.SURFACE3_AREA2_UPPER) AS SURFACE3_AREA2_UPPER
                ,MAX(PRODS.SURFACE3_SEGMENT) AS SURFACE3_SEGMENT
                ,MAX(PRODS.INNERLAYERCIRCUIT_WIDTH) AS INNERLAYERCIRCUIT_WIDTH
                ,MAX(PRODS.INNERLAYERCIRCUIT_GAP) AS INNERLAYERCIRCUIT_GAP
                ,MAX(PRODS.OUTERLAYERCIRCUIT_WIDTH) AS OUTERLAYERCIRCUIT_WIDTH
                ,MAX(PRODS.OUTERLAYERCIRCUIT_GAP) AS OUTERLAYERCIRCUIT_GAP
                ,MAX(PRODS.OLBCIRCUIT_WIDTH) AS OLBCIRCUIT_WIDTH
                ,MAX(PRODS.OLBCIRCUIT_GAP) AS OLBCIRCUIT_GAP
                ,MAX(PRODS.MVH_LAND) AS MVH_LAND
                ,MAX(PRODS.MVH_HOLE) AS MVH_HOLE
                ,MAX(PRODS.IVH_LAND) AS IVH_LAND
                ,MAX(PRODS.IVH_HOLE) AS IVH_HOLE
                ,MAX(PRODS.PTH_LAND) AS PTH_LAND
                ,MAX(PRODS.PTH_HOLE) AS PTH_HOLE
                ,MAX(PRODS.ELONGATIONCHECK1) AS ELONGATIONCHECK1
                ,MAX(PRODS.ELONGATION1) AS ELONGATION1
                ,MAX(PRODS.PITCHBEFORE1) AS PITCHBEFORE1
                ,MAX(PRODS.ELONGATIONCHECK2) AS ELONGATIONCHECK2
                ,MAX(PRODS.ELONGATION2) AS ELONGATION2
                ,MAX(PRODS.PITCHBEFORE2) AS PITCHBEFORE2
          FROM   --외층동도금
                 (SELECT ITEMID
                        ,ITEMVERSION
                        ,MAX(TRIM(SPECDETAILFROM)) AS COPPER4_CUSTOMER_LOWER
                        ,MAX(TRIM(SPECDETAILTO)) AS COPPER4_CUSTOMER
                        ,MAX(TRIM(FROMORIGINAL)) AS COPPER4_CUSTOMER_UPPER
                        ,(SELECT MAX(DESCRIPTION)
                          FROM   BAS_PRODUCTITEMSPECDETAIL Q
                          WHERE  Q.ENTERPRISEID = #{SESSION_ENTERPRISEID}
                          AND    Q.ITEMID = BP.ITEMID
                          AND    Q.ITEMVERSION = BP.ITEMVERSION
                          AND    Q.DETAILNAME = 'PLATINGSPEC2'
                          AND    Q.DETAILTYPE IN ('CopperPlating', 'Circuit')) AS COPPER4_SEGMENT1
                        ,(SELECT MAX(DESCRIPTION)
                          FROM   BAS_PRODUCTITEMSPECDETAIL Q
                          WHERE  Q.ENTERPRISEID = #{SESSION_ENTERPRISEID}
                          AND    Q.ITEMID = BP.ITEMID
                          AND    Q.ITEMVERSION = BP.ITEMVERSION
                          AND    Q.DETAILNAME = 'PLATINGSPEC3'
                          AND    Q.DETAILTYPE IN ('CopperPlating', 'Circuit')) AS COPPER4_SEGMENT2
                        ,NULL AS COPPER1_CUSTOMER_LOWER
                        ,NULL AS COPPER1_CUSTOMER
                        ,NULL AS COPPER1_CUSTOMER_UPPER
                        ,NULL AS COPPER1_SEGMENT1
                        ,NULL AS COPPER1_SEGMENT2
                        ,NULL AS COPPER2_CUSTOMER_LOWER
                        ,NULL AS COPPER2_CUSTOMER
                        ,NULL AS COPPER2_CUSTOMER_UPPER
                        ,NULL AS COPPER2_SEGMENT1
                        ,NULL AS COPPER2_SEGMENT2
                        ,NULL AS COPPER3_CUSTOMER_LOWER
                        ,NULL AS COPPER3_CUSTOMER
                        ,NULL AS COPPER3_CUSTOMER_UPPER
                        ,NULL AS COPPER3_SEGMENT1
                        ,NULL AS COPPER3_SEGMENT2
                        ,NULL AS SURFACE1_AREA1_LOWER
                        ,NULL AS SURFACE1_AREA1_UPPER
                        ,NULL AS SURFACE1_AREA2_LOWER
                        ,NULL AS SURFACE1_AREA2_UPPER
                        ,NULL AS SURFACE1_SEGMENT
                        ,NULL AS SURFACE2_AREA1_LOWER
                        ,NULL AS SURFACE2_AREA1_UPPER
                        ,NULL AS SURFACE2_AREA2_LOWER
                        ,NULL AS SURFACE2_AREA2_UPPER
                        ,NULL AS SURFACE2_SEGMENT
                        ,NULL AS SURFACE3_AREA1_LOWER
                        ,NULL AS SURFACE3_AREA1_UPPER
                        ,NULL AS SURFACE3_AREA2_LOWER
                        ,NULL AS SURFACE3_AREA2_UPPER
                        ,NULL AS SURFACE3_SEGMENT
                        ,NULL AS INNERLAYERCIRCUIT_WIDTH
                        ,NULL AS INNERLAYERCIRCUIT_GAP
                        ,NULL AS OUTERLAYERCIRCUIT_WIDTH
                        ,NULL AS OUTERLAYERCIRCUIT_GAP
                        ,NULL AS OLBCIRCUIT_WIDTH
                        ,NULL AS OLBCIRCUIT_GAP
                        ,NULL AS MVH_LAND
                        ,NULL AS MVH_HOLE
                        ,NULL AS IVH_LAND
                        ,NULL AS IVH_HOLE
                        ,NULL AS PTH_LAND
                        ,NULL AS PTH_HOLE
                        ,(SELECT MAX(TRIM(SPECDETAILTO))
                          FROM   BAS_PRODUCTITEMSPECDETAIL Q
                          WHERE  Q.ENTERPRISEID = #{SESSION_ENTERPRISEID}
                          AND    Q.ITEMID = BP.ITEMID
                          AND    Q.ITEMVERSION = BP.ITEMVERSION
                          AND    Q.DETAILNAME = 'ELONGATIONCHECK1'
                          AND    Q.DETAILTYPE IN ('CopperPlating', 'Circuit')) AS ELONGATIONCHECK1
                        ,(SELECT MAX(TRIM(SPECDETAILFROM))
                          FROM   BAS_PRODUCTITEMSPECDETAIL Q
                          WHERE  Q.ENTERPRISEID = #{SESSION_ENTERPRISEID}
                          AND    Q.ITEMID = BP.ITEMID
                          AND    Q.ITEMVERSION = BP.ITEMVERSION
                          AND    Q.DETAILNAME = 'ELONGATION-1'
                          AND    Q.DETAILTYPE IN ('CopperPlating', 'Circuit')) AS ELONGATION1
                        ,(SELECT MAX(TRIM(SPECDETAILFROM))
                          FROM   BAS_PRODUCTITEMSPECDETAIL Q
                          WHERE  Q.ENTERPRISEID = #{SESSION_ENTERPRISEID}
                          AND    Q.ITEMID = BP.ITEMID
                          AND    Q.ITEMVERSION = BP.ITEMVERSION
                          AND    Q.DETAILNAME = 'PITCHBEFORE1'
                          AND    Q.DETAILTYPE IN ('CopperPlating', 'Circuit')) AS PITCHBEFORE1
                        ,(SELECT MAX(TRIM(SPECDETAILTO))
                          FROM   BAS_PRODUCTITEMSPECDETAIL Q
                          WHERE  Q.ENTERPRISEID = #{SESSION_ENTERPRISEID}
                          AND    Q.ITEMID = BP.ITEMID
                          AND    Q.ITEMVERSION = BP.ITEMVERSION
                          AND    Q.DETAILNAME = 'ELONGATIONCHECK2'
                          AND    Q.DETAILTYPE IN ('CopperPlating', 'Circuit')) AS ELONGATIONCHECK2
                        ,(SELECT MAX(TRIM(SPECDETAILFROM))
                          FROM   BAS_PRODUCTITEMSPECDETAIL Q
                          WHERE  Q.ENTERPRISEID = #{SESSION_ENTERPRISEID}
                          AND    Q.ITEMID = BP.ITEMID
                          AND    Q.ITEMVERSION = BP.ITEMVERSION
                          AND    Q.DETAILNAME = 'ELONGATION-2'
                          AND    Q.DETAILTYPE IN ('CopperPlating', 'Circuit')) AS ELONGATION2
                        ,(SELECT MAX(TRIM(SPECDETAILFROM))
                          FROM   BAS_PRODUCTITEMSPECDETAIL Q
                          WHERE  Q.ENTERPRISEID = #{SESSION_ENTERPRISEID}
                          AND    Q.ITEMID = BP.ITEMID
                          AND    Q.ITEMVERSION = BP.ITEMVERSION
                          AND    Q.DETAILNAME = 'PITCHBEFORE2'
                          AND    Q.DETAILTYPE IN ('CopperPlating', 'Circuit')) AS PITCHBEFORE2
                  FROM   BAS_PRODUCTITEMSPECDETAIL BP
                  WHERE  1 = 1
                  AND    BP.ENTERPRISEID = #{SESSION_ENTERPRISEID}
                  AND    BP.DETAILTYPE IN ('CopperPlating', 'Circuit')
                  AND    BP.DETAILNAME = 'PLATINGSPEC1'
                  GROUP  BY ITEMID
                           ,ITEMVERSION
                  
                  UNION ALL
                  
                  --내층동도금1
                  SELECT ITEMID
                        ,ITEMVERSION
                        ,NULL AS COPPER4_CUSTOMER_LOWER
                        ,NULL AS COPPER4_CUSTOMER
                        ,NULL AS COPPER4_CUSTOMER_UPPER
                        ,NULL AS COPPER4_SEGMENT1
                        ,NULL AS COPPER4_SEGMENT2
                        ,MAX(TRIM(SPECDETAILFROM)) AS COPPER1_CUSTOMER_LOWER
                        ,MAX(TRIM(SPECDETAILTO)) AS COPPER1_CUSTOMER
                        ,MAX(TRIM(FROMORIGINAL)) AS COPPER1_CUSTOMER_UPPER
                        ,(SELECT MAX(DESCRIPTION)
                          FROM   BAS_PRODUCTITEMSPECDETAIL Q
                          WHERE  Q.ENTERPRISEID = #{SESSION_ENTERPRISEID}
                          AND    Q.ITEMID = BP.ITEMID
                          AND    Q.ITEMVERSION = BP.ITEMVERSION
                          AND    Q.DETAILNAME = 'PLATINGSPEC5'
                          AND    Q.DETAILTYPE IN ('CopperPlating', 'Circuit')) AS COPPER1_SEGMENT1
                        ,(SELECT MAX(DESCRIPTION)
                          FROM   BAS_PRODUCTITEMSPECDETAIL Q
                          WHERE  Q.ENTERPRISEID = #{SESSION_ENTERPRISEID}
                          AND    Q.ITEMID = BP.ITEMID
                          AND    Q.ITEMVERSION = BP.ITEMVERSION
                          AND    Q.DETAILNAME = 'PLATINGSPEC6'
                          AND    Q.DETAILTYPE IN ('CopperPlating', 'Circuit')) AS COPPER1_SEGMENT2
                        ,NULL AS COPPER2_CUSTOMER_LOWER
                        ,NULL AS COPPER2_CUSTOMER
                        ,NULL AS COPPER2_CUSTOMER_UPPER
                        ,NULL AS COPPER2_SEGMENT1
                        ,NULL AS COPPER2_SEGMENT2
                        ,NULL AS COPPER3_CUSTOMER_LOWER
                        ,NULL AS COPPER3_CUSTOMER
                        ,NULL AS COPPER3_CUSTOMER_UPPER
                        ,NULL AS COPPER3_SEGMENT1
                        ,NULL AS COPPER3_SEGMENT2
                        ,NULL AS SURFACE1_AREA1_LOWER
                        ,NULL AS SURFACE1_AREA1_UPPER
                        ,NULL AS SURFACE1_AREA2_LOWER
                        ,NULL AS SURFACE1_AREA2_UPPER
                        ,NULL AS SURFACE1_SEGMENT
                        ,NULL AS SURFACE2_AREA1_LOWER
                        ,NULL AS SURFACE2_AREA1_UPPER
                        ,NULL AS SURFACE2_AREA2_LOWER
                        ,NULL AS SURFACE2_AREA2_UPPER
                        ,NULL AS SURFACE2_SEGMENT
                        ,NULL AS SURFACE3_AREA1_LOWER
                        ,NULL AS SURFACE3_AREA1_UPPER
                        ,NULL AS SURFACE3_AREA2_LOWER
                        ,NULL AS SURFACE3_AREA2_UPPER
                        ,NULL AS SURFACE3_SEGMENT
                        ,NULL AS INNERLAYERCIRCUIT_WIDTH
                        ,NULL AS INNERLAYERCIRCUIT_GAP
                        ,NULL AS OUTERLAYERCIRCUIT_WIDTH
                        ,NULL AS OUTERLAYERCIRCUIT_GAP
                        ,NULL AS OLBCIRCUIT_WIDTH
                        ,NULL AS OLBCIRCUIT_GAP
                        ,NULL AS MVH_LAND
                        ,NULL AS MVH_HOLE
                        ,NULL AS IVH_LAND
                        ,NULL AS IVH_HOLE
                        ,NULL AS PTH_LAND
                        ,NULL AS PTH_HOLE
                        ,NULL AS ELONGATIONCHECK1
                        ,NULL AS ELONGATION1
                        ,NULL AS PITCHBEFORE1
                        ,NULL AS ELONGATIONCHECK2
                        ,NULL AS ELONGATION2
                        ,NULL AS PITCHBEFORE2
                  FROM   BAS_PRODUCTITEMSPECDETAIL BP
                  WHERE  1 = 1
                  AND    BP.ENTERPRISEID = #{SESSION_ENTERPRISEID}
                  AND    BP.DETAILTYPE IN ('CopperPlating', 'Circuit')
                  AND    BP.DETAILNAME = 'PLATINGSPEC4'
                  GROUP  BY ITEMID
                           ,ITEMVERSION
                  
                  UNION ALL
                  --내층동도금2 
                  SELECT ITEMID
                        ,ITEMVERSION
                        ,NULL AS COPPER4_CUSTOMER_LOWER
                        ,NULL AS COPPER4_CUSTOMER
                        ,NULL AS COPPER4_CUSTOMER_UPPER
                        ,NULL AS COPPER4_SEGMENT1
                        ,NULL AS COPPER4_SEGMENT2
                        ,NULL AS COPPER1_CUSTOMER_LOWER
                        ,NULL AS COPPER1_CUSTOMER
                        ,NULL AS COPPER1_CUSTOMER_UPPER
                        ,NULL AS COPPER1_SEGMENT1
                        ,NULL AS COPPER1_SEGMENT2
                        ,MAX(TRIM(SPECDETAILFROM)) AS COPPER2_CUSTOMER_LOWER
                        ,MAX(TRIM(SPECDETAILTO)) AS COPPER2_CUSTOMER
                        ,MAX(TRIM(FROMORIGINAL)) AS COPPER2_CUSTOMER_UPPER
                        ,(SELECT MAX(DESCRIPTION)
                          FROM   BAS_PRODUCTITEMSPECDETAIL Q
                          WHERE  Q.ENTERPRISEID = #{SESSION_ENTERPRISEID}
                          AND    Q.ITEMID = BP.ITEMID
                          AND    Q.ITEMVERSION = BP.ITEMVERSION
                          AND    Q.DETAILNAME = 'PLATINGSPEC8'
                          AND    Q.DETAILTYPE IN ('CopperPlating', 'Circuit')) AS COPPER2_SEGMENT1
                        ,(SELECT MAX(DESCRIPTION)
                          FROM   BAS_PRODUCTITEMSPECDETAIL Q
                          WHERE  Q.ENTERPRISEID = #{SESSION_ENTERPRISEID}
                          AND    Q.ITEMID = BP.ITEMID
                          AND    Q.ITEMVERSION = BP.ITEMVERSION
                          AND    Q.DETAILNAME = 'PLATINGSPEC9'
                          AND    Q.DETAILTYPE IN ('CopperPlating', 'Circuit')) AS COPPER2_SEGMENT2
                         
                        ,NULL AS COPPER3_CUSTOMER_LOWER
                        ,NULL AS COPPER3_CUSTOMER
                        ,NULL AS COPPER3_CUSTOMER_UPPER
                        ,NULL AS COPPER3_SEGMENT1
                        ,NULL AS COPPER3_SEGMENT2
                        ,NULL AS SURFACE1_AREA1_LOWER
                        ,NULL AS SURFACE1_AREA1_UPPER
                        ,NULL AS SURFACE1_AREA2_LOWER
                        ,NULL AS SURFACE1_AREA2_UPPER
                        ,NULL AS SURFACE1_SEGMENT
                        ,NULL AS SURFACE2_AREA1_LOWER
                        ,NULL AS SURFACE2_AREA1_UPPER
                        ,NULL AS SURFACE2_AREA2_LOWER
                        ,NULL AS SURFACE2_AREA2_UPPER
                        ,NULL AS SURFACE2_SEGMENT
                        ,NULL AS SURFACE3_AREA1_LOWER
                        ,NULL AS SURFACE3_AREA1_UPPER
                        ,NULL AS SURFACE3_AREA2_LOWER
                        ,NULL AS SURFACE3_AREA2_UPPER
                        ,NULL AS SURFACE3_SEGMENT
                        ,NULL AS INNERLAYERCIRCUIT_WIDTH
                        ,NULL AS INNERLAYERCIRCUIT_GAP
                        ,NULL AS OUTERLAYERCIRCUIT_WIDTH
                        ,NULL AS OUTERLAYERCIRCUIT_GAP
                        ,NULL AS OLBCIRCUIT_WIDTH
                        ,NULL AS OLBCIRCUIT_GAP
                        ,NULL AS MVH_LAND
                        ,NULL AS MVH_HOLE
                        ,NULL AS IVH_LAND
                        ,NULL AS IVH_HOLE
                        ,NULL AS PTH_LAND
                        ,NULL AS PTH_HOLE
                        ,NULL AS ELONGATIONCHECK1
                        ,NULL AS ELONGATION1
                        ,NULL AS PITCHBEFORE1
                        ,NULL AS ELONGATIONCHECK2
                        ,NULL AS ELONGATION2
                        ,NULL AS PITCHBEFORE2
                  FROM   BAS_PRODUCTITEMSPECDETAIL BP
                  WHERE  1 = 1
                  AND    BP.ENTERPRISEID = #{SESSION_ENTERPRISEID}
                  AND    BP.DETAILTYPE IN ('CopperPlating', 'Circuit')
                  AND    BP.DETAILNAME = 'PLATINGSPEC7'
                  GROUP  BY ITEMID
                           ,ITEMVERSION
                  
                  UNION ALL
                  --내층동도금3 
                  SELECT ITEMID
                        ,ITEMVERSION
                        ,NULL AS COPPER4_CUSTOMER_LOWER
                        ,NULL AS COPPER4_CUSTOMER
                        ,NULL AS COPPER4_CUSTOMER_UPPER
                        ,NULL AS COPPER4_SEGMENT1
                        ,NULL AS COPPER4_SEGMENT2
                        ,NULL AS COPPER1_CUSTOMER_LOWER
                        ,NULL AS COPPER1_CUSTOMER
                        ,NULL AS COPPER1_CUSTOMER_UPPER
                        ,NULL AS COPPER1_SEGMENT1
                        ,NULL AS COPPER1_SEGMENT2
                        ,NULL AS COPPER2_CUSTOMER_LOWER
                        ,NULL AS COPPER2_CUSTOMER
                        ,NULL AS COPPER2_CUSTOMER_UPPER
                        ,NULL AS COPPER2_SEGMENT1
                        ,NULL AS COPPER2_SEGMENT2
                        ,MAX(TRIM(SPECDETAILFROM)) AS COPPER3_CUSTOMER_LOWER
                        ,MAX(TRIM(SPECDETAILTO)) AS COPPER3_CUSTOMER
                        ,MAX(TRIM(FROMORIGINAL)) AS COPPER3_CUSTOMER_UPPER
                        ,(SELECT MAX(DESCRIPTION)
                          FROM   BAS_PRODUCTITEMSPECDETAIL Q
                          WHERE  Q.ENTERPRISEID = #{SESSION_ENTERPRISEID}
                          AND    Q.ITEMID = BP.ITEMID
                          AND    Q.ITEMVERSION = BP.ITEMVERSION
                          AND    Q.DETAILNAME = 'PLATINGSPEC11'
                          AND    Q.DETAILTYPE IN ('CopperPlating', 'Circuit')) AS COPPER3_SEGMENT1
                        ,(SELECT MAX(DESCRIPTION)
                          FROM   BAS_PRODUCTITEMSPECDETAIL Q
                          WHERE  Q.ENTERPRISEID = #{SESSION_ENTERPRISEID}
                          AND    Q.ITEMID = BP.ITEMID
                          AND    Q.ITEMVERSION = BP.ITEMVERSION
                          AND    Q.DETAILNAME = 'PLATINGSPEC12'
                          AND    Q.DETAILTYPE IN ('CopperPlating', 'Circuit')) AS COPPER3_SEGMENT2
                         
                        ,NULL AS SURFACE1_AREA1_LOWER
                        ,NULL AS SURFACE1_AREA1_UPPER
                        ,NULL AS SURFACE1_AREA2_LOWER
                        ,NULL AS SURFACE1_AREA2_UPPER
                        ,NULL AS SURFACE1_SEGMENT
                        ,NULL AS SURFACE2_AREA1_LOWER
                        ,NULL AS SURFACE2_AREA1_UPPER
                        ,NULL AS SURFACE2_AREA2_LOWER
                        ,NULL AS SURFACE2_AREA2_UPPER
                        ,NULL AS SURFACE2_SEGMENT
                        ,NULL AS SURFACE3_AREA1_LOWER
                        ,NULL AS SURFACE3_AREA1_UPPER
                        ,NULL AS SURFACE3_AREA2_LOWER
                        ,NULL AS SURFACE3_AREA2_UPPER
                        ,NULL AS SURFACE3_SEGMENT
                        ,NULL AS INNERLAYERCIRCUIT_WIDTH
                        ,NULL AS INNERLAYERCIRCUIT_GAP
                        ,NULL AS OUTERLAYERCIRCUIT_WIDTH
                        ,NULL AS OUTERLAYERCIRCUIT_GAP
                        ,NULL AS OLBCIRCUIT_WIDTH
                        ,NULL AS OLBCIRCUIT_GAP
                        ,NULL AS MVH_LAND
                        ,NULL AS MVH_HOLE
                        ,NULL AS IVH_LAND
                        ,NULL AS IVH_HOLE
                        ,NULL AS PTH_LAND
                        ,NULL AS PTH_HOLE
                        ,NULL AS ELONGATIONCHECK1
                        ,NULL AS ELONGATION1
                        ,NULL AS PITCHBEFORE1
                        ,NULL AS ELONGATIONCHECK2
                        ,NULL AS ELONGATION2
                        ,NULL AS PITCHBEFORE2
                  FROM   BAS_PRODUCTITEMSPECDETAIL BP
                  WHERE  1 = 1
                  AND    BP.ENTERPRISEID = #{SESSION_ENTERPRISEID}
                  AND    BP.DETAILTYPE IN ('CopperPlating', 'Circuit')
                  AND    BP.DETAILNAME = 'PLATINGSPEC10'
                  GROUP  BY ITEMID
                           ,ITEMVERSION
                  
                  UNION ALL
                  --표면도금1 
                  SELECT ITEMID
                        ,ITEMVERSION
                        ,NULL AS COPPER4_CUSTOMER_LOWER
                        ,NULL AS COPPER4_CUSTOMER
                        ,NULL AS COPPER4_CUSTOMER_UPPER
                        ,NULL AS COPPER4_SEGMENT1
                        ,NULL AS COPPER4_SEGMENT2
                        ,NULL AS COPPER1_CUSTOMER_LOWER
                        ,NULL AS COPPER1_CUSTOMER
                        ,NULL AS COPPER1_CUSTOMER_UPPER
                        ,NULL AS COPPER1_SEGMENT1
                        ,NULL AS COPPER1_SEGMENT2
                        ,NULL AS COPPER2_CUSTOMER_LOWER
                        ,NULL AS COPPER2_CUSTOMER
                        ,NULL AS COPPER2_CUSTOMER_UPPER
                        ,NULL AS COPPER2_SEGMENT1
                        ,NULL AS COPPER2_SEGMENT2
                        ,NULL AS COPPER3_CUSTOMER_LOWER
                        ,NULL AS COPPER3_CUSTOMER
                        ,NULL AS COPPER3_CUSTOMER_UPPER
                        ,NULL AS COPPER3_SEGMENT1
                        ,NULL AS COPPER3_SEGMENT2
                        ,MAX(TRIM(SPECDETAILFROM)) AS SURFACE1_AREA1_LOWER
                        ,MAX(TRIM(FROMORIGINAL)) AS SURFACE1_AREA1_UPPER
                        ,MAX(TRIM(SPECDETAILTO)) AS SURFACE1_AREA2_LOWER
                        ,MAX(TRIM(TOORIGINAL)) AS SURFACE1_AREA2_UPPER
                        ,MAX(DESCRIPTION) AS SURFACE1_SEGMENT
                        ,NULL AS SURFACE2_AREA1_LOWER
                        ,NULL AS SURFACE2_AREA1_UPPER
                        ,NULL AS SURFACE2_AREA2_LOWER
                        ,NULL AS SURFACE2_AREA2_UPPER
                        ,NULL AS SURFACE2_SEGMENT
                        ,NULL AS SURFACE3_AREA1_LOWER
                        ,NULL AS SURFACE3_AREA1_UPPER
                        ,NULL AS SURFACE3_AREA2_LOWER
                        ,NULL AS SURFACE3_AREA2_UPPER
                        ,NULL AS SURFACE3_SEGMENT
                        ,NULL AS INNERLAYERCIRCUIT_WIDTH
                        ,NULL AS INNERLAYERCIRCUIT_GAP
                        ,NULL AS OUTERLAYERCIRCUIT_WIDTH
                        ,NULL AS OUTERLAYERCIRCUIT_GAP
                        ,NULL AS OLBCIRCUIT_WIDTH
                        ,NULL AS OLBCIRCUIT_GAP
                        ,NULL AS MVH_LAND
                        ,NULL AS MVH_HOLE
                        ,NULL AS IVH_LAND
                        ,NULL AS IVH_HOLE
                        ,NULL AS PTH_LAND
                        ,NULL AS PTH_HOLE
                        ,NULL AS ELONGATIONCHECK1
                        ,NULL AS ELONGATION1
                        ,NULL AS PITCHBEFORE1
                        ,NULL AS ELONGATIONCHECK2
                        ,NULL AS ELONGATION2
                        ,NULL AS PITCHBEFORE2
                  FROM   BAS_PRODUCTITEMSPECDETAIL BP
                  WHERE  1 = 1
                  AND    BP.ENTERPRISEID = #{SESSION_ENTERPRISEID}
                  AND    BP.DETAILTYPE IN ('CopperPlating', 'Circuit')
                  AND    BP.DETAILNAME = 'PLATINGSPEC13'
                  GROUP  BY ITEMID
                           ,ITEMVERSION
                  
                  UNION ALL
                  --표면도금2 
                  SELECT ITEMID
                        ,ITEMVERSION
                        ,NULL AS COPPER4_CUSTOMER_LOWER
                        ,NULL AS COPPER4_CUSTOMER
                        ,NULL AS COPPER4_CUSTOMER_UPPER
                        ,NULL AS COPPER4_SEGMENT1
                        ,NULL AS COPPER4_SEGMENT2
                        ,NULL AS COPPER1_CUSTOMER_LOWER
                        ,NULL AS COPPER1_CUSTOMER
                        ,NULL AS COPPER1_CUSTOMER_UPPER
                        ,NULL AS COPPER1_SEGMENT1
                        ,NULL AS COPPER1_SEGMENT2
                        ,NULL AS COPPER2_CUSTOMER_LOWER
                        ,NULL AS COPPER2_CUSTOMER
                        ,NULL AS COPPER2_CUSTOMER_UPPER
                        ,NULL AS COPPER2_SEGMENT1
                        ,NULL AS COPPER2_SEGMENT2
                        ,NULL AS COPPER3_CUSTOMER_LOWER
                        ,NULL AS COPPER3_CUSTOMER
                        ,NULL AS COPPER3_CUSTOMER_UPPER
                        ,NULL AS COPPER3_SEGMENT1
                        ,NULL AS COPPER3_SEGMENT2
                        ,NULL AS SURFACE1_AREA1_LOWER
                        ,NULL AS SURFACE1_AREA1_UPPER
                        ,NULL AS SURFACE1_AREA2_LOWER
                        ,NULL AS SURFACE1_AREA2_UPPER
                        ,NULL AS SURFACE1_SEGMENT
                        ,MAX(TRIM(SPECDETAILFROM)) AS SURFACE2_AREA1_LOWER
                        ,MAX(TRIM(FROMORIGINAL)) AS SURFACE2_AREA1_UPPER
                        ,MAX(TRIM(SPECDETAILTO)) AS SURFACE2_AREA2_LOWER
                        ,MAX(TRIM(TOORIGINAL)) AS SURFACE2_AREA2_UPPER
                        ,MAX(DESCRIPTION) AS SURFACE2_SEGMENT
                        ,NULL AS SURFACE3_AREA1_LOWER
                        ,NULL AS SURFACE3_AREA1_UPPER
                        ,NULL AS SURFACE3_AREA2_LOWER
                        ,NULL AS SURFACE3_AREA2_UPPER
                        ,NULL AS SURFACE3_SEGMENT
                        ,NULL AS INNERLAYERCIRCUIT_WIDTH
                        ,NULL AS INNERLAYERCIRCUIT_GAP
                        ,NULL AS OUTERLAYERCIRCUIT_WIDTH
                        ,NULL AS OUTERLAYERCIRCUIT_GAP
                        ,NULL AS OLBCIRCUIT_WIDTH
                        ,NULL AS OLBCIRCUIT_GAP
                        ,NULL AS MVH_LAND
                        ,NULL AS MVH_HOLE
                        ,NULL AS IVH_LAND
                        ,NULL AS IVH_HOLE
                        ,NULL AS PTH_LAND
                        ,NULL AS PTH_HOLE
                        ,NULL AS ELONGATIONCHECK1
                        ,NULL AS ELONGATION1
                        ,NULL AS PITCHBEFORE1
                        ,NULL AS ELONGATIONCHECK2
                        ,NULL AS ELONGATION2
                        ,NULL AS PITCHBEFORE2
                  FROM   BAS_PRODUCTITEMSPECDETAIL BP
                  WHERE  1 = 1
                  AND    BP.ENTERPRISEID = #{SESSION_ENTERPRISEID}
                  AND    BP.DETAILTYPE IN ('CopperPlating', 'Circuit')
                  AND    BP.DETAILNAME = 'PLATINGSPEC14'
                  GROUP  BY ITEMID
                           ,ITEMVERSION
                  
                  UNION ALL
                  --표면도금3 
                  SELECT ITEMID
                        ,ITEMVERSION
                        ,NULL AS COPPER4_CUSTOMER_LOWER
                        ,NULL AS COPPER4_CUSTOMER
                        ,NULL AS COPPER4_CUSTOMER_UPPER
                        ,NULL AS COPPER4_SEGMENT1
                        ,NULL AS COPPER4_SEGMENT2
                        ,NULL AS COPPER1_CUSTOMER_LOWER
                        ,NULL AS COPPER1_CUSTOMER
                        ,NULL AS COPPER1_CUSTOMER_UPPER
                        ,NULL AS COPPER1_SEGMENT1
                        ,NULL AS COPPER1_SEGMENT2
                        ,NULL AS COPPER2_CUSTOMER_LOWER
                        ,NULL AS COPPER2_CUSTOMER
                        ,NULL AS COPPER2_CUSTOMER_UPPER
                        ,NULL AS COPPER2_SEGMENT1
                        ,NULL AS COPPER2_SEGMENT2
                        ,NULL AS COPPER3_CUSTOMER_LOWER
                        ,NULL AS COPPER3_CUSTOMER
                        ,NULL AS COPPER3_CUSTOMER_UPPER
                        ,NULL AS COPPER3_SEGMENT1
                        ,NULL AS COPPER3_SEGMENT2
                        ,NULL AS SURFACE1_AREA1_LOWER
                        ,NULL AS SURFACE1_AREA1_UPPER
                        ,NULL AS SURFACE1_AREA2_LOWER
                        ,NULL AS SURFACE1_AREA2_UPPER
                        ,NULL AS SURFACE1_SEGMENT
                        ,NULL AS SURFACE2_AREA1_LOWER
                        ,NULL AS SURFACE2_AREA1_UPPER
                        ,NULL AS SURFACE2_AREA2_LOWER
                        ,NULL AS SURFACE2_AREA2_UPPER
                        ,NULL AS SURFACE2_SEGMENT
                        ,MAX(TRIM(SPECDETAILFROM)) AS SURFACE3_AREA1_LOWER
                        ,MAX(TRIM(FROMORIGINAL)) AS SURFACE3_AREA1_UPPER
                        ,MAX(TRIM(SPECDETAILTO)) AS SURFACE3_AREA2_LOWER
                        ,MAX(TRIM(TOORIGINAL)) AS SURFACE3_AREA2_UPPER
                        ,MAX(DESCRIPTION) AS SURFACE3_SEGMENT
                        ,NULL AS INNERLAYERCIRCUIT_WIDTH
                        ,NULL AS INNERLAYERCIRCUIT_GAP
                        ,NULL AS OUTERLAYERCIRCUIT_WIDTH
                        ,NULL AS OUTERLAYERCIRCUIT_GAP
                        ,NULL AS OLBCIRCUIT_WIDTH
                        ,NULL AS OLBCIRCUIT_GAP
                        ,NULL AS MVH_LAND
                        ,NULL AS MVH_HOLE
                        ,NULL AS IVH_LAND
                        ,NULL AS IVH_HOLE
                        ,NULL AS PTH_LAND
                        ,NULL AS PTH_HOLE
                        ,NULL AS ELONGATIONCHECK1
                        ,NULL AS ELONGATION1
                        ,NULL AS PITCHBEFORE1
                        ,NULL AS ELONGATIONCHECK2
                        ,NULL AS ELONGATION2
                        ,NULL AS PITCHBEFORE2
                  FROM   BAS_PRODUCTITEMSPECDETAIL BP
                  WHERE  1 = 1
                  AND    BP.ENTERPRISEID = #{SESSION_ENTERPRISEID}
                  AND    BP.DETAILTYPE IN ('CopperPlating', 'Circuit')
                  AND    BP.DETAILNAME = 'PLATINGSPEC15'
                  GROUP  BY ITEMID
                           ,ITEMVERSION
                  
                  UNION ALL
                  --내층회로 
                  SELECT ITEMID
                        ,ITEMVERSION
                        ,NULL AS COPPER4_CUSTOMER_LOWER
                        ,NULL AS COPPER4_CUSTOMER
                        ,NULL AS COPPER4_CUSTOMER_UPPER
                        ,NULL AS COPPER4_SEGMENT1
                        ,NULL AS COPPER4_SEGMENT2
                        ,NULL AS COPPER1_CUSTOMER_LOWER
                        ,NULL AS COPPER1_CUSTOMER
                        ,NULL AS COPPER1_CUSTOMER_UPPER
                        ,NULL AS COPPER1_SEGMENT1
                        ,NULL AS COPPER1_SEGMENT2
                        ,NULL AS COPPER2_CUSTOMER_LOWER
                        ,NULL AS COPPER2_CUSTOMER
                        ,NULL AS COPPER2_CUSTOMER_UPPER
                        ,NULL AS COPPER2_SEGMENT1
                        ,NULL AS COPPER2_SEGMENT2
                        ,NULL AS COPPER3_CUSTOMER_LOWER
                        ,NULL AS COPPER3_CUSTOMER
                        ,NULL AS COPPER3_CUSTOMER_UPPER
                        ,NULL AS COPPER3_SEGMENT1
                        ,NULL AS COPPER3_SEGMENT2
                        ,NULL AS SURFACE1_AREA1_LOWER
                        ,NULL AS SURFACE1_AREA1_UPPER
                        ,NULL AS SURFACE1_AREA2_LOWER
                        ,NULL AS SURFACE1_AREA2_UPPER
                        ,NULL AS SURFACE1_SEGMENT
                        ,NULL AS SURFACE2_AREA1_LOWER
                        ,NULL AS SURFACE2_AREA1_UPPER
                        ,NULL AS SURFACE2_AREA2_LOWER
                        ,NULL AS SURFACE2_AREA2_UPPER
                        ,NULL AS SURFACE2_SEGMENT
                        ,NULL AS SURFACE3_AREA1_LOWER
                        ,NULL AS SURFACE3_AREA1_UPPER
                        ,NULL AS SURFACE3_AREA2_LOWER
                        ,NULL AS SURFACE3_AREA2_UPPER
                        ,NULL AS SURFACE3_SEGMENT
                        ,MAX(TRIM(SPECDETAILFROM)) AS INNERLAYERCIRCUIT_WIDTH
                        ,MAX(TRIM(SPECDETAILTO)) AS INNERLAYERCIRCUIT_GAP
                        ,NULL AS OUTERLAYERCIRCUIT_WIDTH
                        ,NULL AS OUTERLAYERCIRCUIT_GAP
                        ,NULL AS OLBCIRCUIT_WIDTH
                        ,NULL AS OLBCIRCUIT_GAP
                        ,NULL AS MVH_LAND
                        ,NULL AS MVH_HOLE
                        ,NULL AS IVH_LAND
                        ,NULL AS IVH_HOLE
                        ,NULL AS PTH_LAND
                        ,NULL AS PTH_HOLE
                        ,NULL AS ELONGATIONCHECK1
                        ,NULL AS ELONGATION1
                        ,NULL AS PITCHBEFORE1
                        ,NULL AS ELONGATIONCHECK2
                        ,NULL AS ELONGATION2
                        ,NULL AS PITCHBEFORE2
                  FROM   BAS_PRODUCTITEMSPECDETAIL BP
                  WHERE  1 = 1
                  AND    BP.ENTERPRISEID = #{SESSION_ENTERPRISEID}
                  AND    BP.DETAILTYPE IN ('CopperPlating', 'Circuit')
                  AND    BP.DETAILNAME = 'INNERLAYERCIRCUIT'
                  GROUP  BY ITEMID
                           ,ITEMVERSION
                  
                  UNION ALL
                  --외층회로 
                  SELECT ITEMID
                        ,ITEMVERSION
                        ,NULL AS COPPER4_CUSTOMER_LOWER
                        ,NULL AS COPPER4_CUSTOMER
                        ,NULL AS COPPER4_CUSTOMER_UPPER
                        ,NULL AS COPPER4_SEGMENT1
                        ,NULL AS COPPER4_SEGMENT2
                        ,NULL AS COPPER1_CUSTOMER_LOWER
                        ,NULL AS COPPER1_CUSTOMER
                        ,NULL AS COPPER1_CUSTOMER_UPPER
                        ,NULL AS COPPER1_SEGMENT1
                        ,NULL AS COPPER1_SEGMENT2
                        ,NULL AS COPPER2_CUSTOMER_LOWER
                        ,NULL AS COPPER2_CUSTOMER
                        ,NULL AS COPPER2_CUSTOMER_UPPER
                        ,NULL AS COPPER2_SEGMENT1
                        ,NULL AS COPPER2_SEGMENT2
                        ,NULL AS COPPER3_CUSTOMER_LOWER
                        ,NULL AS COPPER3_CUSTOMER
                        ,NULL AS COPPER3_CUSTOMER_UPPER
                        ,NULL AS COPPER3_SEGMENT1
                        ,NULL AS COPPER3_SEGMENT2
                        ,NULL AS SURFACE1_AREA1_LOWER
                        ,NULL AS SURFACE1_AREA1_UPPER
                        ,NULL AS SURFACE1_AREA2_LOWER
                        ,NULL AS SURFACE1_AREA2_UPPER
                        ,NULL AS SURFACE1_SEGMENT
                        ,NULL AS SURFACE2_AREA1_LOWER
                        ,NULL AS SURFACE2_AREA1_UPPER
                        ,NULL AS SURFACE2_AREA2_LOWER
                        ,NULL AS SURFACE2_AREA2_UPPER
                        ,NULL AS SURFACE2_SEGMENT
                        ,NULL AS SURFACE3_AREA1_LOWER
                        ,NULL AS SURFACE3_AREA1_UPPER
                        ,NULL AS SURFACE3_AREA2_LOWER
                        ,NULL AS SURFACE3_AREA2_UPPER
                        ,NULL AS SURFACE3_SEGMENT
                        ,NULL AS INNERLAYERCIRCUIT_WIDTH
                        ,NULL AS INNERLAYERCIRCUIT_GAP
                        ,MAX(TRIM(SPECDETAILFROM)) AS OUTERLAYERCIRCUIT_WIDTH
                        ,MAX(TRIM(SPECDETAILTO)) AS OUTERLAYERCIRCUIT_GAP
                        ,NULL AS OLBCIRCUIT_WIDTH
                        ,NULL AS OLBCIRCUIT_GAP
                        ,NULL AS MVH_LAND
                        ,NULL AS MVH_HOLE
                        ,NULL AS IVH_LAND
                        ,NULL AS IVH_HOLE
                        ,NULL AS PTH_LAND
                        ,NULL AS PTH_HOLE
                        ,NULL AS ELONGATIONCHECK1
                        ,NULL AS ELONGATION1
                        ,NULL AS PITCHBEFORE1
                        ,NULL AS ELONGATIONCHECK2
                        ,NULL AS ELONGATION2
                        ,NULL AS PITCHBEFORE2
                  FROM   BAS_PRODUCTITEMSPECDETAIL BP
                  WHERE  1 = 1
                  AND    BP.ENTERPRISEID = #{SESSION_ENTERPRISEID}
                  AND    BP.DETAILTYPE IN ('CopperPlating', 'Circuit')
                  AND    BP.DETAILNAME = 'OUTERLAYERCIRCUIT'
                  GROUP  BY ITEMID
                           ,ITEMVERSION
                  
                  UNION ALL
                  --OLB회로 
                  SELECT ITEMID
                        ,ITEMVERSION
                        ,NULL AS COPPER4_CUSTOMER_LOWER
                        ,NULL AS COPPER4_CUSTOMER
                        ,NULL AS COPPER4_CUSTOMER_UPPER
                        ,NULL AS COPPER4_SEGMENT1
                        ,NULL AS COPPER4_SEGMENT2
                        ,NULL AS COPPER1_CUSTOMER_LOWER
                        ,NULL AS COPPER1_CUSTOMER
                        ,NULL AS COPPER1_CUSTOMER_UPPER
                        ,NULL AS COPPER1_SEGMENT1
                        ,NULL AS COPPER1_SEGMENT2
                        ,NULL AS COPPER2_CUSTOMER_LOWER
                        ,NULL AS COPPER2_CUSTOMER
                        ,NULL AS COPPER2_CUSTOMER_UPPER
                        ,NULL AS COPPER2_SEGMENT1
                        ,NULL AS COPPER2_SEGMENT2
                        ,NULL AS COPPER3_CUSTOMER_LOWER
                        ,NULL AS COPPER3_CUSTOMER
                        ,NULL AS COPPER3_CUSTOMER_UPPER
                        ,NULL AS COPPER3_SEGMENT1
                        ,NULL AS COPPER3_SEGMENT2
                        ,NULL AS SURFACE1_AREA1_LOWER
                        ,NULL AS SURFACE1_AREA1_UPPER
                        ,NULL AS SURFACE1_AREA2_LOWER
                        ,NULL AS SURFACE1_AREA2_UPPER
                        ,NULL AS SURFACE1_SEGMENT
                        ,NULL AS SURFACE2_AREA1_LOWER
                        ,NULL AS SURFACE2_AREA1_UPPER
                        ,NULL AS SURFACE2_AREA2_LOWER
                        ,NULL AS SURFACE2_AREA2_UPPER
                        ,NULL AS SURFACE2_SEGMENT
                        ,NULL AS SURFACE3_AREA1_LOWER
                        ,NULL AS SURFACE3_AREA1_UPPER
                        ,NULL AS SURFACE3_AREA2_LOWER
                        ,NULL AS SURFACE3_AREA2_UPPER
                        ,NULL AS SURFACE3_SEGMENT
                        ,NULL AS INNERLAYERCIRCUIT_WIDTH
                        ,NULL AS INNERLAYERCIRCUIT_GAP
                        ,NULL AS OUTERLAYERCIRCUIT_WIDTH
                        ,NULL AS OUTERLAYERCIRCUIT_GAP
                        ,MAX(TRIM(SPECDETAILFROM)) AS OLBCIRCUIT_WIDTH
                        ,MAX(TRIM(SPECDETAILTO)) AS OLBCIRCUIT_GAP
                        ,NULL AS MVH_LAND
                        ,NULL AS MVH_HOLE
                        ,NULL AS IVH_LAND
                        ,NULL AS IVH_HOLE
                        ,NULL AS PTH_LAND
                        ,NULL AS PTH_HOLE
                        ,NULL AS ELONGATIONCHECK1
                        ,NULL AS ELONGATION1
                        ,NULL AS PITCHBEFORE1
                        ,NULL AS ELONGATIONCHECK2
                        ,NULL AS ELONGATION2
                        ,NULL AS PITCHBEFORE2
                  FROM   BAS_PRODUCTITEMSPECDETAIL BP
                  WHERE  1 = 1
                  AND    BP.ENTERPRISEID = #{SESSION_ENTERPRISEID}
                  AND    BP.DETAILTYPE IN ('CopperPlating', 'Circuit')
                  AND    BP.DETAILNAME = 'OLBCIRCUIT'
                  GROUP  BY ITEMID
                           ,ITEMVERSION
                  
                  UNION ALL
                  --MVH 
                  SELECT ITEMID
                        ,ITEMVERSION
                        ,NULL AS COPPER4_CUSTOMER_LOWER
                        ,NULL AS COPPER4_CUSTOMER
                        ,NULL AS COPPER4_CUSTOMER_UPPER
                        ,NULL AS COPPER4_SEGMENT1
                        ,NULL AS COPPER4_SEGMENT2
                        ,NULL AS COPPER1_CUSTOMER_LOWER
                        ,NULL AS COPPER1_CUSTOMER
                        ,NULL AS COPPER1_CUSTOMER_UPPER
                        ,NULL AS COPPER1_SEGMENT1
                        ,NULL AS COPPER1_SEGMENT2
                        ,NULL AS COPPER2_CUSTOMER_LOWER
                        ,NULL AS COPPER2_CUSTOMER
                        ,NULL AS COPPER2_CUSTOMER_UPPER
                        ,NULL AS COPPER2_SEGMENT1
                        ,NULL AS COPPER2_SEGMENT2
                        ,NULL AS COPPER3_CUSTOMER_LOWER
                        ,NULL AS COPPER3_CUSTOMER
                        ,NULL AS COPPER3_CUSTOMER_UPPER
                        ,NULL AS COPPER3_SEGMENT1
                        ,NULL AS COPPER3_SEGMENT2
                        ,NULL AS SURFACE1_AREA1_LOWER
                        ,NULL AS SURFACE1_AREA1_UPPER
                        ,NULL AS SURFACE1_AREA2_LOWER
                        ,NULL AS SURFACE1_AREA2_UPPER
                        ,NULL AS SURFACE1_SEGMENT
                        ,NULL AS SURFACE2_AREA1_LOWER
                        ,NULL AS SURFACE2_AREA1_UPPER
                        ,NULL AS SURFACE2_AREA2_LOWER
                        ,NULL AS SURFACE2_AREA2_UPPER
                        ,NULL AS SURFACE2_SEGMENT
                        ,NULL AS SURFACE3_AREA1_LOWER
                        ,NULL AS SURFACE3_AREA1_UPPER
                        ,NULL AS SURFACE3_AREA2_LOWER
                        ,NULL AS SURFACE3_AREA2_UPPER
                        ,NULL AS SURFACE3_SEGMENT
                        ,NULL AS INNERLAYERCIRCUIT_WIDTH
                        ,NULL AS INNERLAYERCIRCUIT_GAP
                        ,NULL AS OUTERLAYERCIRCUIT_WIDTH
                        ,NULL AS OUTERLAYERCIRCUIT_GAP
                        ,NULL AS OLBCIRCUIT_WIDTH
                        ,NULL AS OLBCIRCUIT_GAP
                        ,MAX(TRIM(SPECDETAILFROM)) AS MVH_LAND
                        ,MAX(TRIM(SPECDETAILTO)) AS MVH_HOLE
                        ,NULL AS IVH_LAND
                        ,NULL AS IVH_HOLE
                        ,NULL AS PTH_LAND
                        ,NULL AS PTH_HOLE
                        ,NULL AS ELONGATIONCHECK1
                        ,NULL AS ELONGATION1
                        ,NULL AS PITCHBEFORE1
                        ,NULL AS ELONGATIONCHECK2
                        ,NULL AS ELONGATION2
                        ,NULL AS PITCHBEFORE2
                  FROM   BAS_PRODUCTITEMSPECDETAIL BP
                  WHERE  1 = 1
                  AND    BP.ENTERPRISEID = #{SESSION_ENTERPRISEID}
                  AND    BP.DETAILTYPE IN ('CopperPlating', 'Circuit')
                  AND    BP.DETAILNAME = 'MVH'
                  GROUP  BY ITEMID
                           ,ITEMVERSION
                  
                  UNION ALL
                  --IVH 
                  SELECT ITEMID
                        ,ITEMVERSION
                        ,NULL AS COPPER4_CUSTOMER_LOWER
                        ,NULL AS COPPER4_CUSTOMER
                        ,NULL AS COPPER4_CUSTOMER_UPPER
                        ,NULL AS COPPER4_SEGMENT1
                        ,NULL AS COPPER4_SEGMENT2
                        ,NULL AS COPPER1_CUSTOMER_LOWER
                        ,NULL AS COPPER1_CUSTOMER
                        ,NULL AS COPPER1_CUSTOMER_UPPER
                        ,NULL AS COPPER1_SEGMENT1
                        ,NULL AS COPPER1_SEGMENT2
                        ,NULL AS COPPER2_CUSTOMER_LOWER
                        ,NULL AS COPPER2_CUSTOMER
                        ,NULL AS COPPER2_CUSTOMER_UPPER
                        ,NULL AS COPPER2_SEGMENT1
                        ,NULL AS COPPER2_SEGMENT2
                        ,NULL AS COPPER3_CUSTOMER_LOWER
                        ,NULL AS COPPER3_CUSTOMER
                        ,NULL AS COPPER3_CUSTOMER_UPPER
                        ,NULL AS COPPER3_SEGMENT1
                        ,NULL AS COPPER3_SEGMENT2
                        ,NULL AS SURFACE1_AREA1_LOWER
                        ,NULL AS SURFACE1_AREA1_UPPER
                        ,NULL AS SURFACE1_AREA2_LOWER
                        ,NULL AS SURFACE1_AREA2_UPPER
                        ,NULL AS SURFACE1_SEGMENT
                        ,NULL AS SURFACE2_AREA1_LOWER
                        ,NULL AS SURFACE2_AREA1_UPPER
                        ,NULL AS SURFACE2_AREA2_LOWER
                        ,NULL AS SURFACE2_AREA2_UPPER
                        ,NULL AS SURFACE2_SEGMENT
                        ,NULL AS SURFACE3_AREA1_LOWER
                        ,NULL AS SURFACE3_AREA1_UPPER
                        ,NULL AS SURFACE3_AREA2_LOWER
                        ,NULL AS SURFACE3_AREA2_UPPER
                        ,NULL AS SURFACE3_SEGMENT
                        ,NULL AS INNERLAYERCIRCUIT_WIDTH
                        ,NULL AS INNERLAYERCIRCUIT_GAP
                        ,NULL AS OUTERLAYERCIRCUIT_WIDTH
                        ,NULL AS OUTERLAYERCIRCUIT_GAP
                        ,NULL AS OLBCIRCUIT_WIDTH
                        ,NULL AS OLBCIRCUIT_GAP
                        ,NULL AS MVH_LAND
                        ,NULL AS MVH_HOLE
                        ,MAX(TRIM(SPECDETAILFROM)) AS IVH_LAND
                        ,MAX(TRIM(SPECDETAILTO)) AS IVH_HOLE
                        ,NULL AS PTH_LAND
                        ,NULL AS PTH_HOLE
                        ,NULL AS ELONGATIONCHECK1
                        ,NULL AS ELONGATION1
                        ,NULL AS PITCHBEFORE1
                        ,NULL AS ELONGATIONCHECK2
                        ,NULL AS ELONGATION2
                        ,NULL AS PITCHBEFORE2
                  FROM   BAS_PRODUCTITEMSPECDETAIL BP
                  WHERE  1 = 1
                  AND    BP.ENTERPRISEID = #{SESSION_ENTERPRISEID}
                  AND    BP.DETAILTYPE IN ('CopperPlating', 'Circuit')
                  AND    BP.DETAILNAME = 'IVH'
                  GROUP  BY ITEMID
                           ,ITEMVERSION
                  
                  UNION ALL
                  --PTH 
                  SELECT ITEMID
                        ,ITEMVERSION
                        ,NULL AS COPPER4_CUSTOMER_LOWER
                        ,NULL AS COPPER4_CUSTOMER
                        ,NULL AS COPPER4_CUSTOMER_UPPER
                        ,NULL AS COPPER4_SEGMENT1
                        ,NULL AS COPPER4_SEGMENT2
                        ,NULL AS COPPER1_CUSTOMER_LOWER
                        ,NULL AS COPPER1_CUSTOMER
                        ,NULL AS COPPER1_CUSTOMER_UPPER
                        ,NULL AS COPPER1_SEGMENT1
                        ,NULL AS COPPER1_SEGMENT2
                        ,NULL AS COPPER2_CUSTOMER_LOWER
                        ,NULL AS COPPER2_CUSTOMER
                        ,NULL AS COPPER2_CUSTOMER_UPPER
                        ,NULL AS COPPER2_SEGMENT1
                        ,NULL AS COPPER2_SEGMENT2
                        ,NULL AS COPPER3_CUSTOMER_LOWER
                        ,NULL AS COPPER3_CUSTOMER
                        ,NULL AS COPPER3_CUSTOMER_UPPER
                        ,NULL AS COPPER3_SEGMENT1
                        ,NULL AS COPPER3_SEGMENT2
                        ,NULL AS SURFACE1_AREA1_LOWER
                        ,NULL AS SURFACE1_AREA1_UPPER
                        ,NULL AS SURFACE1_AREA2_LOWER
                        ,NULL AS SURFACE1_AREA2_UPPER
                        ,NULL AS SURFACE1_SEGMENT
                        ,NULL AS SURFACE2_AREA1_LOWER
                        ,NULL AS SURFACE2_AREA1_UPPER
                        ,NULL AS SURFACE2_AREA2_LOWER
                        ,NULL AS SURFACE2_AREA2_UPPER
                        ,NULL AS SURFACE2_SEGMENT
                        ,NULL AS SURFACE3_AREA1_LOWER
                        ,NULL AS SURFACE3_AREA1_UPPER
                        ,NULL AS SURFACE3_AREA2_LOWER
                        ,NULL AS SURFACE3_AREA2_UPPER
                        ,NULL AS SURFACE3_SEGMENT
                        ,NULL AS INNERLAYERCIRCUIT_WIDTH
                        ,NULL AS INNERLAYERCIRCUIT_GAP
                        ,NULL AS OUTERLAYERCIRCUIT_WIDTH
                        ,NULL AS OUTERLAYERCIRCUIT_GAP
                        ,NULL AS OLBCIRCUIT_WIDTH
                        ,NULL AS OLBCIRCUIT_GAP
                        ,NULL AS MVH_LAND
                        ,NULL AS MVH_HOLE
                        ,NULL AS IVH_LAND
                        ,NULL AS IVH_HOLE
                        ,MAX(TRIM(SPECDETAILFROM)) AS PTH_LAND
                        ,MAX(TRIM(SPECDETAILTO)) AS PTH_HOLE
                        ,NULL AS ELONGATIONCHECK1
                        ,NULL AS ELONGATION1
                        ,NULL AS PITCHBEFORE1
                        ,NULL AS ELONGATIONCHECK2
                        ,NULL AS ELONGATION2
                        ,NULL AS PITCHBEFORE2
                  FROM   BAS_PRODUCTITEMSPECDETAIL BP
                  WHERE  1 = 1
                  AND    BP.ENTERPRISEID = #{SESSION_ENTERPRISEID}
                  AND    BP.DETAILTYPE IN ('CopperPlating', 'Circuit')
                  AND    BP.DETAILNAME = 'PTH'
                  GROUP  BY ITEMID
                           ,ITEMVERSION
                 ) PRODS
          GROUP  BY PRODS.ITEMID
                   ,PRODS.ITEMVERSION
          
          ) X),
INSPSPECDETAIL AS
 (SELECT ROW_NUMBER() OVER(PARTITION BY IR.RESOURCEID, IR.RESOURCEVERSION, IR.PROCESSSEGID ORDER BY IR.RESOURCEID, IR.RESOURCEVERSION, IR.INSPITEMID ASC) RN
        ,IR.SPECSEQUENCE
        ,IR.SPECCLASSID
        ,IR.ENTERPRISEID
        ,IR.INSPITEMID
        ,DC.DICTIONARYNAME AS INSPITEMNAME
        ,IR.RESOURCEID
        ,IR.RESOURCEVERSION
        ,IR.PROCESSSEGID
        ,SD.LSL
        ,SD.SL
        ,SD.USL
  FROM   BAS_INSPECTIONITEMREL IR
  LEFT   JOIN BAS_SPECDETAIL SD
  ON     IR.SPECSEQUENCE = SD.SPECSEQUENCE
  AND    IR.SPECCLASSID = SD.SPECCLASSID
  LEFT   JOIN BAS_INSPITEM IP
  ON     IR.INSPITEMID = IP.INSPITEMID
  AND    IR.INSPITEMVERSION = IP.INSPITEMVERSION
  LEFT   JOIN CMD_DICTIONARY DC
  ON     IP.INSPITEMNAME = DC.DICTIONARYID
  AND    DC.LANGUAGETYPE = 'ko-KR'
  WHERE  IR.SPECCLASSID = 'OperationSpec'
  AND    IR.RESOURCETYPE = 'ProcessSegmentID'
  AND    IR.ENTERPRISEID = #{SESSION_ENTERPRISEID}
  --품목ID
  --내부REV
  ),
ITEMSPEC AS
 (SELECT ITM.PLANTID -- SITE
        ,ITM.ITEMID -- 제품코드
        ,ISP.CUSTOMERITEMVERSION AS CUSTOMERREV -- 고객 REV
        ,ITM.ITEMVERSION -- 내부 REV
        ,ITM.ITEMNAME -- 제품명
        ,ISP.SPECIFICATIONMAN -- 사양담당자
        ,COALESCE(SPU.USERNAME, ISP.SPECIFICATIONMAN) AS SPECPERSON -- 사양담당자명
        ,ISP.SALESMAN AS SALESMANID -- 영업담당
        ,COALESCE(SAU.USERNAME, ISP.SALESMAN) AS SALESMAN
        ,ISP.CAMMAN AS CAMMANID -- CAM담당
        ,COALESCE(CAU.USERNAME, ISP.CAMMAN) AS CAMMAN
        ,ISP.ENDUSER AS ENDUSERID -- ENDUSER
        ,COALESCE(ENU.MEANING, ISP.ENDUSER) AS ENDUSER
        ,ISP.JOBTYPE -- 작업구분
        ,ISP.PRODUCTIONTYPE -- 생산구분
         -- 공정수순
         -- 표준공정 ID
         -- 표준공정명
        ,ISP.PRODUCTRATING AS PRODUCTLEVEL -- 제품 등급
        ,ITM.SALEORDERCATEGORY -- 판매 범주
        ,CASE
             WHEN ISP.CUSTOMERID IS NULL THEN
              ''
             ELSE
              ISP.CUSTOMERID || ' / ' || ISP.CUSTOMERNAME
         END AS CUSTOMERCODENAME -- 고객코드 / 고객명
        ,ISP.INPUTTYPE -- 투입유형
        ,ISP.PRODUCTTYPE -- 제품타입
        ,ISP.PROJECTNAME -- 프로젝트명
        ,ISP.LAYER -- LAYER
        ,ISP.RTRSHT -- RTR/SHEET
        ,ISP.ELONGATION -- 연신율
        ,ISP.IMPEDANCE -- 임피던스
        ,ISP.OXIDE -- OXIDE
        ,ISP.ASSY -- ASSY
        ,ISP.SEPARATINGPORTION -- 분리부
        ,ISP.PNLSIZEXAXIS || ' * ' || ISP.PNLSIZEYAXIS AS PNLSIZE -- PNLSIZE_X / PNLSIZE_Y
        ,ISP.PCSSIZEXAXIS || ' * ' || ISP.PCSSIZEYAXIS AS PCSSIZE -- PCSSIZE_X / PCSSIZE_Y
        ,ISP.ARYSIZEXAXIS || ' * ' || ISP.ARYSIZEYAXIS AS ARYSIZE -- ARYSIZE_X / ARYSIZE_Y
        ,ISP.PCSPNL -- PCSPNL
        ,ISP.PNLMM -- PNLMM
        ,ISP.PCSMM -- PCSMM
        ,ISP.ARRAYDIAGONAL -- ARY대각선길이(mm)
        ,ISP.PCSARY -- PCS / ARRAY(PCS)
        ,ISP.XOUT -- X-OUT
        ,CASE
             WHEN COALESCE(ISP.PCSARY, 0) = 0 THEN
              NULL
             WHEN ISP.XOUT IS NULL THEN
              0
             ELSE
              (ISP.XOUT / ISP.PCSARY)
         END AS XOUTPERCENT -- X-OUT(%)
        ,ISP.UL_MARK AS ULMARK -- ULMARK
        ,TO_CHAR(ISP.CREATEDTIME, 'YYYY-MM-DD') AS REGISTRATIONDATE -- 등록일자
        ,TO_CHAR(ISP.DELIVERYDATE, 'YYYY-MM-DD') AS DELIVERYDATE -- 납기일자
        ,ISP.GITYPE AS OUTBOUNDFORMAT -- 출고형태
        ,TO_CHAR(ISP.INVALIDDATE, 'YYYY-MM-DD') AS INVALIDDATE -- 무효화일자
        ,ISP.ISWEEKMNG -- 주차관리
        ,ISP.INPUTSIZEXAXIS -- 투입 SIZE X축
        ,ISP.INPUTSHRINKX -- 투입 수축 X축
        ,ISP.INPUTSHRINKY -- 투입 수축 Y축
        ,M.ACCEPTFLAG -- 신규데이터 여부
         --회로 및 드릴사양
        ,ISP.IMPEDANCETYPE1 -- 임피던스 구분1
        ,ISP.IMPEDANCETYPE2 -- 임피던스 구분2
        ,ISP.IMPEDANCETYPE3 -- 임피던스 구분3
        ,ISP.IMPEDANCESPEC1 -- 임피던스 SPEC1
        ,ISP.IMPEDANCESPEC2 -- 임피던스 SPEC2
        ,ISP.IMPEDANCESPEC3 -- 임피던스 SPEC3
        ,ISP.IMPEDANCEAPPLYLAYER1 -- 임피던스 적용층1
        ,ISP.IMPEDANCEAPPLYLAYER2 -- 임피던스 적용층2
        ,ISP.IMPEDANCEAPPLYLAYER3 -- 임피던스 적용층3
        ,ISP.FLATNESS11 -- 평탄도 부위1
        ,ISP.FLATNESS21 -- 평탄도 값1
        ,ISP.FLATNESS11UM -- 평탄도 부위2
        ,ISP.FLATNESS22 -- 평탄도 값2
        ,ISP.FLATNESS12 -- 평탄도 부위3
        ,ISP.FLATNESS21UM -- 평탄도 값3
         --외층동도금
        ,ISD.COPPER4_CUSTOMER_LOWER
        ,ISD.COPPER4_CUSTOMER
        ,ISD.COPPER4_CUSTOMER_UPPER
        ,ISD.COPPER4_SEGMENT
         --내층동도금1
        ,ISD.COPPER1_CUSTOMER_LOWER
        ,ISD.COPPER1_CUSTOMER
        ,ISD.COPPER1_CUSTOMER_UPPER
        ,ISD.COPPER1_SEGMENT
         --내층동도금2
        ,ISD.COPPER2_CUSTOMER_LOWER
        ,ISD.COPPER2_CUSTOMER
        ,ISD.COPPER2_CUSTOMER_UPPER
        ,ISD.COPPER2_SEGMENT
         --내층동도금3
        ,ISD.COPPER3_CUSTOMER_LOWER
        ,ISD.COPPER3_CUSTOMER
        ,ISD.COPPER3_CUSTOMER_UPPER
        ,ISD.COPPER3_SEGMENT
         --표면도금1
        ,ISD.SURFACE1_AREA1_LOWER
        ,ISD.SURFACE1_AREA1_UPPER
        ,ISD.SURFACE1_AREA2_LOWER
        ,ISD.SURFACE1_AREA2_UPPER
        ,ISD.SURFACE1_SEGMENT
         --표면도금2
        ,ISD.SURFACE2_AREA1_LOWER
        ,ISD.SURFACE2_AREA1_UPPER
        ,ISD.SURFACE2_AREA2_LOWER
        ,ISD.SURFACE2_AREA2_UPPER
        ,ISD.SURFACE2_SEGMENT
         --표면도금3
        ,ISD.SURFACE3_AREA1_LOWER
        ,ISD.SURFACE3_AREA1_UPPER
        ,ISD.SURFACE3_AREA2_LOWER
        ,ISD.SURFACE3_AREA2_UPPER
        ,ISD.SURFACE3_SEGMENT
         --내층회로
        ,ISD.INNERLAYERCIRCUIT_WIDTH
        ,ISD.INNERLAYERCIRCUIT_GAP
         --외층회로
        ,ISD.OUTERLAYERCIRCUIT_WIDTH
        ,ISD.OUTERLAYERCIRCUIT_GAP
         --OLB회로
        ,ISD.OLBCIRCUIT_WIDTH
        ,ISD.OLBCIRCUIT_GAP
         --MVH
        ,ISD.MVH_LAND
        ,ISD.MVH_HOLE
         --IVH
        ,ISD.IVH_LAND
        ,ISD.IVH_HOLE
         --PTH
        ,ISD.PTH_LAND
        ,ISD.PTH_HOLE
         --연신율1
        ,ISD.ELONGATIONCHECK1
        ,CASE
             WHEN ISD.ELONGATION1 IS NULL THEN
              0
             ELSE
              TO_NUMBER(ISD.ELONGATION1)
         END AS ELONGATION1
        ,CASE
             WHEN ISD.PITCHBEFORE1 IS NULL THEN
              0
             ELSE
              TO_NUMBER(ISD.PITCHBEFORE1)
         END AS PITCHBEFORE1
        ,CASE
             WHEN ISD.ELONGATION1 IS NULL OR
                  ISD.PITCHBEFORE1 IS NULL THEN
              NULL
             ELSE
              TO_NUMBER(((TO_NUMBER(ISD.ELONGATION1) / 100) *
                        TO_NUMBER(ISD.PITCHBEFORE1)))
         END AS DATA1
         --연신율2
        ,ISD.ELONGATIONCHECK2
        ,CASE
             WHEN ISD.ELONGATION2 IS NULL THEN
              0
             ELSE
              TO_NUMBER(ISD.ELONGATION2)
         END AS ELONGATION2
        ,CASE
             WHEN ISD.PITCHBEFORE2  IS NULL THEN
              0
             ELSE
              TO_NUMBER(ISD.PITCHBEFORE2)
         END AS PITCHBEFORE2
        ,CASE
             WHEN ISD.ELONGATION2  IS NULL OR
                  ISD.PITCHBEFORE2  IS NULL THEN
              NULL
             ELSE
              TO_NUMBER(((TO_NUMBER(ISD.ELONGATION2) / 100) *
                        TO_NUMBER(ISD.PITCHBEFORE2)))
         END AS DATA2
         ,ISP.JOBINPUTTYPE
  FROM   BAS_ITEMMASTER ITM
  INNER  JOIN BAS_PRODUCTITEMSPEC ISP
  ON     ITM.ENTERPRISEID = ISP.ENTERPRISEID
  AND    ITM.ITEMID = ISP.ITEMID
  AND    ITM.ITEMVERSION = ISP.ITEMVERSION
  LEFT   JOIN ITEMSPECDETAIL ISD
  ON     ITM.ITEMID = ISD.ITEMID
  AND    ITM.ITEMVERSION = ISD.ITEMVERSION
  LEFT   JOIN BAS_PRODUCTITEMSPECCOMMENT M
  ON     ITM.ITEMID = M.ITEMID
  AND    ITM.ITEMVERSION = M.ITEMVERSION
  LEFT   JOIN CMD_USER_V SPU
  ON     ISP.SPECIFICATIONMAN = SPU.USERID
  LEFT   JOIN CMD_USER_V SAU
  ON     ISP.SALESMAN = SAU.USERID
  LEFT   JOIN CMD_USER_V CAU
  ON     ISP.CAMMAN = CAU.USERID
  LEFT   JOIN CMD_LOOKUP_VALUES ENU ON     ISP.ENDUSER = ENU.LOOKUP_CODE
  													AND   ENU.LOOKUP_TYPE = 'EndUser'
  													AND   ENU.ENABLED_FLAG = 'Y'
  
  WHERE  1 = 1
  AND    ITM.MASTERDATACLASSID = 'Product'
  AND    ITM.VALIDSTATE = 'Valid'
		<if test="PLANTID != null and PLANTID !='' ">
			AND ITM.PLANTID = #{PLANTID}
		</if>
		<if test="P_PERIOD_PERIODFR != null and P_PERIOD_PERIODFR !='' ">
			<![CDATA[
				AND	ITM.CREATEDTIME >= to_timestamp( #{P_PERIOD_PERIODFR} || ' 00:00:00','YYYY-MM-DD HH24:MI:SS')
			]]>
		</if>
		<if test="P_PERIOD_PERIODTO != null and P_PERIOD_PERIODTO !='' ">
			<![CDATA[
				AND	ITM.CREATEDTIME <= to_timestamp( #{P_PERIOD_PERIODTO} || ' 23:59:59','YYYY-MM-DD HH24:MI:SS')
			]]>
		</if>
                        
		<if test="ITEMID != null and ITEMID !='' ">
			AND ITM.ITEMID = #{ITEMID}
		</if>
		<if test="ITEMNAME != null and ITEMNAME !='' ">
			AND UPPER(ITM.ITEMNAME) LIKE '%' ||  UPPER(#{ITEMNAME}) || '%'
		</if>
		<if test="ITEMREV != null and ITEMREV !='' ">
			AND UPPER(ITM.ITEMVERSION) LIKE '%' ||  UPPER(#{ITEMREV}) || '%'
		</if>
		<if test="CUSTOMERREV != null and CUSTOMERREV !='' ">
			AND UPPER(ISP.CUSTOMERITEMVERSION) LIKE '%' ||  UPPER(#{CUSTOMERREV}) || '%'
		</if>
		<if test="CUSTOMERCODENAME != null and CUSTOMERCODENAME !='' ">
			AND (
					UPPER(ISP.CUSTOMERID) LIKE '%' ||  UPPER(#{CUSTOMERCODENAME}) || '%'
					OR UPPER(ISP.CUSTOMERNAME) LIKE '%' ||  UPPER(#{CUSTOMERCODENAME}) || '%'
				)
		</if>		
		
       <if test="SPECOWNER != null and SPECOWNER !='' ">
           	  AND EXISTS (
                               SELECT  1
                               FROM    ufn_selectStringToSplit(#{SPECOWNER}, ',') M
                               WHERE   ISP.SPECIFICATIONMAN = M.VALUE
                          )    
       </if>
       <if test="PRODUCTIONTYPE != null and PRODUCTIONTYPE !='' ">	<!-- 생산구분 -->
			AND ISP.PRODUCTIONTYPE = #{PRODUCTIONTYPE}
		</if>
		<if test="JOBTYPE != null and JOBTYPE !='' ">	<!-- 작업구분 -->
			AND ISP.JOBTYPE = #{JOBTYPE}
		</if>	
		<if test="PRODUCTLEVEL != null and PRODUCTLEVEL !='' ">	<!-- 제품등급 -->
			AND ISP.PRODUCTRATING = #{PRODUCTLEVEL}
		</if>	
		<if test="JOBINPUTTYPE != null and JOBINPUTTYPE !='' "><!-- 투입유형 -->
			AND ISP.JOBINPUTTYPE = #{JOBINPUTTYPE}
		</if>	
		<if test="PRODUCTTYPE != null and PRODUCTTYPE !='' "><!-- 제품Type -->
			AND ISP.PRODUCTTYPE = #{PRODUCTTYPE}
		</if>	
		<if test="LAYER != null and LAYER !='' "><!-- 층수 -->
			AND ISP.LAYER = #{LAYER}
		</if>	
		<if test="RTRSHT != null and RTRSHT !='' "><!-- RTR/Sheet -->
			AND ISP.RTRSHT = #{RTRSHT}
		</if>	
		<if test="ELONGATION != null and ELONGATION !='' "><!-- 연신율 -->
			AND COALESCE(ISP.ELONGATION, 'N') = #{ELONGATION}
		</if>	
		<if test="IMPEDANCE != null and IMPEDANCE !='' "><!-- 임피던스 -->
			AND COALESCE(ISP.IMPEDANCE, 'N') = #{IMPEDANCE}
		</if>	
		<if test="OXIDE != null and OXIDE !='' "><!-- OXIDE -->
			AND COALESCE(ISP.OXIDE, 'N') = #{OXIDE}
		</if>	
		<if test="ASSY != null and ASSY !='' "><!-- ASSY -->
			AND COALESCE(ISP.ASSY, 'N')  = #{ASSY}
		</if>	
		<if test="SEPARATE != null and SEPARATE !='' "><!-- 분리부 -->
			AND     COALESCE(ISP.SEPARATINGPORTION, 'N') = #{SEPARATE}
		</if>	
		
  AND    ITM.ENTERPRISEID = #{SESSION_ENTERPRISEID}        
  ),
PRODUCTVIEW AS
 (SELECT IM.ACCEPTFLAG
        ,IM.ARRAYDIAGONAL
        ,IM.ARYSIZE
        ,IM.ASSY
        ,IM.CAMMAN
        ,IM.CAMMANID
        ,IM.COPPER1_CUSTOMER
        ,IM.COPPER1_CUSTOMER_LOWER
        ,IM.COPPER1_CUSTOMER_UPPER
        ,IM.COPPER1_SEGMENT
        ,IM.COPPER2_CUSTOMER
        ,IM.COPPER2_CUSTOMER_LOWER
        ,IM.COPPER2_CUSTOMER_UPPER
        ,IM.COPPER2_SEGMENT
        ,IM.COPPER3_CUSTOMER
        ,IM.COPPER3_CUSTOMER_LOWER
        ,IM.COPPER3_CUSTOMER_UPPER
        ,IM.COPPER3_SEGMENT
        ,IM.COPPER4_CUSTOMER
        ,IM.COPPER4_CUSTOMER_LOWER
        ,IM.COPPER4_CUSTOMER_UPPER
        ,IM.COPPER4_SEGMENT
        ,IM.CUSTOMERCODENAME
        ,IM.CUSTOMERREV
        ,IM.DELIVERYDATE
        ,IM.ELONGATION
        ,IM.ELONGATION1
        ,IM.ELONGATION2
        ,IM.ELONGATIONCHECK1
        ,IM.ELONGATIONCHECK2
        ,IM.ENDUSER
        ,IM.ENDUSERID
        ,IM.FLATNESS11
        ,IM.FLATNESS11UM
        ,IM.FLATNESS12
        ,IM.FLATNESS21
        ,IM.FLATNESS21UM
        ,IM.FLATNESS22
        ,IM.IMPEDANCE
        ,IM.IMPEDANCEAPPLYLAYER1
        ,IM.IMPEDANCEAPPLYLAYER2
        ,IM.IMPEDANCEAPPLYLAYER3
        ,IM.IMPEDANCESPEC1
        ,IM.IMPEDANCESPEC2
        ,IM.IMPEDANCESPEC3
        ,IM.IMPEDANCETYPE1
        ,IM.IMPEDANCETYPE2
        ,IM.IMPEDANCETYPE3
        ,IM.INNERLAYERCIRCUIT_GAP
        ,IM.INNERLAYERCIRCUIT_WIDTH
        ,IM.INPUTSHRINKX
        ,IM.INPUTSHRINKY
        ,IM.INPUTSIZEXAXIS
        ,IM.INPUTTYPE
        ,IM.INVALIDDATE
        ,IM.ISWEEKMNG
        ,IM.ITEMID
        ,IM.ITEMNAME
        ,IM.ITEMVERSION
        ,IM.IVH_HOLE
        ,IM.IVH_LAND
        ,IM.JOBTYPE
        ,IM.LAYER
        ,IM.MVH_HOLE
        ,IM.MVH_LAND
        ,IM.OLBCIRCUIT_GAP
        ,IM.OLBCIRCUIT_WIDTH
        ,IM.OUTBOUNDFORMAT
        ,IM.OUTERLAYERCIRCUIT_GAP
        ,IM.OUTERLAYERCIRCUIT_WIDTH
        ,IM.OXIDE
        ,IM.PCSARY
        ,IM.PCSMM
        ,IM.PCSPNL
        ,IM.PCSSIZE
        ,IM.PITCHBEFORE1
        ,IM.PITCHBEFORE2
        ,IM.PLANTID
        ,IM.PNLMM
        ,IM.PNLSIZE
        ,IM.PRODUCTIONTYPE
        ,IM.PRODUCTLEVEL
        ,IM.PRODUCTTYPE
        ,IM.PROJECTNAME
        ,IM.PTH_HOLE
        ,IM.PTH_LAND
        ,IM.REGISTRATIONDATE
        ,IM.RTRSHT
        ,IM.SALEORDERCATEGORY
        ,IM.SALESMAN
        ,IM.SALESMANID
        ,IM.SEPARATINGPORTION
        ,IM.SPECIFICATIONMAN
        ,IM.SPECPERSON
        ,IM.SURFACE1_AREA1_LOWER
        ,IM.SURFACE1_AREA1_UPPER
        ,IM.SURFACE1_AREA2_LOWER
        ,IM.SURFACE1_AREA2_UPPER
        ,IM.SURFACE1_SEGMENT
        ,IM.SURFACE2_AREA1_LOWER
        ,IM.SURFACE2_AREA1_UPPER
        ,IM.SURFACE2_AREA2_LOWER
        ,IM.SURFACE2_AREA2_UPPER
        ,IM.SURFACE2_SEGMENT
        ,IM.SURFACE3_AREA1_LOWER
        ,IM.SURFACE3_AREA1_UPPER
        ,IM.SURFACE3_AREA2_LOWER
        ,IM.SURFACE3_AREA2_UPPER
        ,IM.SURFACE3_SEGMENT
        ,IM.ULMARK
        ,IM.XOUT
        ,IM.XOUTPERCENT
         
        ,COALESCE(D4.DICTIONARYNAME, P4.PROCESSSEGMENTNAME) AS COPPER4_TYPE
        ,S4.LSL AS COPPER4_PLATINGCONDITION_LOWER
        ,S4.SL AS COPPER4_PLATINGCONDITION
        ,S4.USL AS COPPER4_PLATINGCONDITION_UPPER
         --외층동도금 홀내벽,면동박,DIMPLE,OVERFILL
        ,S4H.LSL AS COPPER4_HOLEINSIDEWALL_LSL
        ,S4H.USL AS COPPER4_HOLEINSIDEWALL_USL
        ,S4C.LSL AS COPPER4_PLANECUFOIL_LSL
        ,S4C.USL AS COPPER4_PLANECUFOIL_USL
        ,S4D.LSL AS COPPER4_DIMPLE_LSL
        ,S4D.USL AS COPPER4_DIMPLE_USL
        ,S4O.LSL AS COPPER4_OVERFILL_LSL
        ,S4O.USL AS COPPER4_OVERFILL_USL
         --내층동도금1 도금조건
        ,COALESCE(D1.DICTIONARYNAME, P1.PROCESSSEGMENTNAME) AS COPPER1_TYPE
        ,S1.LSL AS COPPER1_PLATINGCONDITION_LOWER
        ,S1.SL AS COPPER1_PLATINGCONDITION
        ,S1.USL AS COPPER1_PLATINGCONDITION_UPPER
         --내층동도금1 홀내벽,면동박,DIMPLE,OVERFILL
        ,S1H.LSL AS COPPER1_HOLEINSIDEWALL_LSL
        ,S1H.USL AS COPPER1_HOLEINSIDEWALL_USL
        ,S1C.LSL AS COPPER1_PLANECUFOIL_LSL
        ,S1C.USL AS COPPER1_PLANECUFOIL_USL
        ,S1D.LSL AS COPPER1_DIMPLE_LSL
        ,S1D.USL AS COPPER1_DIMPLE_USL
        ,S1O.LSL AS COPPER1_OVERFILL_LSL
        ,S1O.USL AS COPPER1_OVERFILL_USL
         --내층동도금2 도금조건
        ,COALESCE(D2.DICTIONARYNAME, P2.PROCESSSEGMENTNAME) AS COPPER2_TYPE
        ,S2.LSL AS COPPER2_PLATINGCONDITION_LOWER
        ,S2.SL AS COPPER2_PLATINGCONDITION
        ,S2.USL AS COPPER2_PLATINGCONDITION_UPPER
         --내층동도금2 홀내벽,면동박,DIMPLE,OVERFILL
        ,S2H.LSL AS COPPER2_HOLEINSIDEWALL_LSL
        ,S2H.USL AS COPPER2_HOLEINSIDEWALL_USL
        ,S2C.LSL AS COPPER2_PLANECUFOIL_LSL
        ,S2C.USL AS COPPER2_PLANECUFOIL_USL
        ,S2D.LSL AS COPPER2_DIMPLE_LSL
        ,S2D.USL AS COPPER2_DIMPLE_USL
        ,S2O.LSL AS COPPER2_OVERFILL_LSL
        ,S2O.USL AS COPPER2_OVERFILL_USL
         --내층동도금3 도금조건
        ,COALESCE(D3.DICTIONARYNAME, P3.PROCESSSEGMENTNAME) AS COPPER3_TYPE
        ,S3.LSL AS COPPER3_PLATINGCONDITION_LOWER
        ,S3.SL AS COPPER3_PLATINGCONDITION
        ,S3.USL AS COPPER3_PLATINGCONDITION_UPPER
         --내층동도금3 홀내벽,면동박,DIMPLE,OVERFILL
        ,S3H.LSL AS COPPER3_HOLEINSIDEWALL_LSL
        ,S3H.USL AS COPPER3_HOLEINSIDEWALL_USL
        ,S3C.LSL AS COPPER3_PLANECUFOIL_LSL
        ,S3C.USL AS COPPER3_PLANECUFOIL_USL
        ,S3D.LSL AS COPPER3_DIMPLE_LSL
        ,S3D.USL AS COPPER3_DIMPLE_USL
        ,S3O.LSL AS COPPER3_OVERFILL_LSL
        ,S3O.USL AS COPPER3_OVERFILL_USL
         --표면도금1
        ,COALESCE(DS1.DICTIONARYNAME, PS1.PROCESSSEGMENTNAME) AS SURFACE1_TYPE
        ,S1S1.INSPITEMNAME AS SURFACE1_SPEC1
        ,S1S1.INSPITEMNAME || ' ' || LSL.DICTIONARYNAME AS SURFACE1_NI_LOWER_CAPTION
        ,S1S1.LSL AS SURFACE1_NI_LOWER_TEMP
        ,S1S1.INSPITEMNAME || ' ' || USL.DICTIONARYNAME AS SURFACE1_NI_UPPER_CAPTION
        ,S1S1.USL AS SURFACE1_NI_UPPER_TEMP
        ,S1S2.INSPITEMNAME AS SURFACE1_SPEC2
        ,S1S2.INSPITEMNAME || ' ' || LSL.DICTIONARYNAME AS SURFACE1_AU_LOWER_CAPTION
        ,S1S2.LSL AS SURFACE1_AU_LOWER_TEMP
        ,S1S2.INSPITEMNAME || ' ' || USL.DICTIONARYNAME AS SURFACE1_AU_UPPER_CAPTION
        ,S1S2.USL AS SURFACE1_AU_UPPER_TEMP
        ,S1S3.INSPITEMNAME AS SURFACE1_SPEC3
        ,S1S3.INSPITEMNAME || ' ' || LSL.DICTIONARYNAME AS SURFACE1_PD_LOWER_CAPTION
        ,S1S3.LSL AS SURFACE1_PD_LOWER_TEMP
        ,S1S3.INSPITEMNAME || ' ' || USL.DICTIONARYNAME AS SURFACE1_PD_UPPER_CAPTION
        ,S1S3.USL AS SURFACE1_PD_UPPER_TEMP
         --표면도금2
        ,COALESCE(DS2.DICTIONARYNAME, PS2.PROCESSSEGMENTNAME) AS SURFACE2_TYPE
        ,S2S1.INSPITEMNAME AS SURFACE2_SPEC1
        ,S2S1.INSPITEMNAME || ' ' || LSL.DICTIONARYNAME AS SURFACE2_NI_LOWER_CAPTION
        ,S2S1.LSL AS SURFACE2_NI_LOWER_TEMP
        ,S2S1.INSPITEMNAME || ' ' || USL.DICTIONARYNAME AS SURFACE2_NI_UPPER_CAPTION
        ,S2S1.USL AS SURFACE2_NI_UPPER_TEMP
        ,S2S2.INSPITEMNAME AS SURFACE2_SPEC2
        ,S2S2.INSPITEMNAME || ' ' || LSL.DICTIONARYNAME AS SURFACE2_AU_LOWER_CAPTION
        ,S2S2.LSL AS SURFACE2_AU_LOWER_TEMP
        ,S2S2.INSPITEMNAME || ' ' || USL.DICTIONARYNAME AS SURFACE2_AU_UPPER_CAPTION
        ,S2S2.USL AS SURFACE2_AU_UPPER_TEMP
        ,S2S3.INSPITEMNAME AS SURFACE2_SPEC3
        ,S2S3.INSPITEMNAME || ' ' || LSL.DICTIONARYNAME AS SURFACE2_PD_LOWER_CAPTION
        ,S2S3.LSL AS SURFACE2_PD_LOWER_TEMP
        ,S2S3.INSPITEMNAME || ' ' || USL.DICTIONARYNAME AS SURFACE2_PD_UPPER_CAPTION
        ,S2S3.USL AS SURFACE2_PD_UPPER_TEMP
         --표면도금3
        ,COALESCE(DS3.DICTIONARYNAME, PS3.PROCESSSEGMENTNAME) AS SURFACE3_TYPE
        ,S3S1.INSPITEMNAME AS SURFACE3_SPEC1
        ,S3S1.INSPITEMNAME || ' ' || LSL.DICTIONARYNAME AS SURFACE3_NI_LOWER_CAPTION
        ,S3S1.LSL AS SURFACE3_NI_LOWER_TEMP
        ,S3S1.INSPITEMNAME || ' ' || USL.DICTIONARYNAME AS SURFACE3_NI_UPPER_CAPTION
        ,S3S1.USL AS SURFACE3_NI_UPPER_TEMP
        ,S3S2.INSPITEMNAME AS SURFACE3_SPEC2
        ,S3S2.INSPITEMNAME || ' ' || LSL.DICTIONARYNAME AS SURFACE3_AU_LOWER_CAPTION
        ,S3S2.LSL AS SURFACE3_AU_LOWER_TEMP
        ,S3S2.INSPITEMNAME || ' ' || USL.DICTIONARYNAME AS SURFACE3_AU_UPPER_CAPTION
        ,S3S2.USL AS SURFACE3_AU_UPPER_TEMP
        ,S3S3.INSPITEMNAME AS SURFACE3_SPEC3
        ,S3S3.INSPITEMNAME || ' ' || LSL.DICTIONARYNAME AS SURFACE3_PD_LOWER_CAPTION
        ,S3S3.LSL AS SURFACE3_PD_LOWER_TEMP
        ,S3S3.INSPITEMNAME || ' ' || USL.DICTIONARYNAME AS SURFACE3_PD_UPPER_CAPTION
        ,S3S3.USL AS SURFACE3_PD_UPPER_TEMP
         --연신율1
        ,(TO_NUMBER(IM.PITCHBEFORE1) + IM.DATA1) AS PITCHAFTER1
        ,(IM.DATA1 * 1000) AS DATA1
        ,(TO_NUMBER((TO_NUMBER(IM.PITCHBEFORE1) + IM.DATA1)) /
         TO_NUMBER(IM.PITCHBEFORE1)) * 100 AS SCALEVALUE1
         --연신율2
        ,(TO_NUMBER(IM.PITCHBEFORE2) + IM.DATA2) AS PITCHAFTER2
        ,(IM.DATA2 * 1000) AS DATA2
        ,(TO_NUMBER((TO_NUMBER(IM.PITCHBEFORE2) + IM.DATA2)) /
         TO_NUMBER(IM.PITCHBEFORE2)) * 100 AS SCALEVALUE2
         ,IM.JOBINPUTTYPE
  FROM   ITEMSPEC IM
  --외층동도금
  LEFT   JOIN INSPSPECDETAIL S4
  ON     IM.ITEMID = S4.RESOURCEID
  AND    IM.ITEMVERSION = S4.RESOURCEVERSION
  AND    IM.COPPER4_SEGMENT = S4.PROCESSSEGID
  AND    S4.RN = 1
  LEFT   JOIN INSPSPECDETAIL S4H
  ON     IM.ITEMID = S4H.RESOURCEID
  AND    IM.ITEMVERSION = S4H.RESOURCEVERSION
  AND    IM.COPPER4_SEGMENT = S4H.PROCESSSEGID
  AND    S4H.INSPITEMID = 'R0071'
  LEFT   JOIN INSPSPECDETAIL S4C
  ON     IM.ITEMID = S4C.RESOURCEID
  AND    IM.ITEMVERSION = S4C.RESOURCEVERSION
  AND    IM.COPPER4_SEGMENT = S4C.PROCESSSEGID
  AND    S4C.INSPITEMID = 'R0072'
  LEFT   JOIN INSPSPECDETAIL S4D
  ON     IM.ITEMID = S4D.RESOURCEID
  AND    IM.ITEMVERSION = S4D.RESOURCEVERSION
  AND    IM.COPPER4_SEGMENT = S4D.PROCESSSEGID
  AND    S4D.INSPITEMID = 'R0073'
  LEFT   JOIN INSPSPECDETAIL S4O
  ON     IM.ITEMID = S4O.RESOURCEID
  AND    IM.ITEMVERSION = S4O.RESOURCEVERSION
  AND    IM.COPPER4_SEGMENT = S4O.PROCESSSEGID
  AND    S4O.INSPITEMID = 'R0070'
  LEFT   JOIN BAS_PROCESSSEGMENT P4
  ON     IM.COPPER4_SEGMENT = P4.PROCESSSEGMENTID
  AND    P4.PROCESSSEGMENTVERSION = '*'
  LEFT   JOIN CMD_DICTIONARY D4
  ON     P4.PROCESSSEGMENTNAME = D4.DICTIONARYID
  AND    D4.LANGUAGETYPE = 'ko-KR'
  --내층동도금1
  LEFT   JOIN INSPSPECDETAIL S1
  ON     IM.ITEMID = S1.RESOURCEID
  AND    IM.ITEMVERSION = S1.RESOURCEVERSION
  AND    IM.COPPER1_SEGMENT = S1.PROCESSSEGID
  AND    S1.RN = 1
  LEFT   JOIN INSPSPECDETAIL S1H
  ON     IM.ITEMID = S1H.RESOURCEID
  AND    IM.ITEMVERSION = S1H.RESOURCEVERSION
  AND    IM.COPPER1_SEGMENT = S1H.PROCESSSEGID
  AND    S1H.INSPITEMID = '0257'
  LEFT   JOIN INSPSPECDETAIL S1C
  ON     IM.ITEMID = S1C.RESOURCEID
  AND    IM.ITEMVERSION = S1C.RESOURCEVERSION
  AND    IM.COPPER1_SEGMENT = S1C.PROCESSSEGID
  AND    S1C.INSPITEMID = '0258'
  LEFT   JOIN INSPSPECDETAIL S1D
  ON     IM.ITEMID = S1D.RESOURCEID
  AND    IM.ITEMVERSION = S1D.RESOURCEVERSION
  AND    IM.COPPER1_SEGMENT = S1D.PROCESSSEGID
  AND    S1D.INSPITEMID = '0259'
  LEFT   JOIN INSPSPECDETAIL S1O
  ON     IM.ITEMID = S1O.RESOURCEID
  AND    IM.ITEMVERSION = S1O.RESOURCEVERSION
  AND    IM.COPPER1_SEGMENT = S1O.PROCESSSEGID
  AND    S1O.INSPITEMID = '0256'
  LEFT   JOIN BAS_PROCESSSEGMENT P1
  ON     IM.COPPER1_SEGMENT = P1.PROCESSSEGMENTID
  AND    P1.PROCESSSEGMENTVERSION = '*'
  LEFT   JOIN CMD_DICTIONARY D1
  ON     P1.PROCESSSEGMENTNAME = D1.DICTIONARYID
  AND    D1.LANGUAGETYPE = 'ko-KR'
  --내층동도금2
  LEFT   JOIN INSPSPECDETAIL S2
  ON     IM.ITEMID = S2.RESOURCEID
  AND    IM.ITEMVERSION = S2.RESOURCEVERSION
  AND    IM.COPPER2_SEGMENT = S2.PROCESSSEGID
  AND    S2.RN = 1
  LEFT   JOIN INSPSPECDETAIL S2H
  ON     IM.ITEMID = S2H.RESOURCEID
  AND    IM.ITEMVERSION = S2H.RESOURCEVERSION
  AND    IM.COPPER2_SEGMENT = S2H.PROCESSSEGID
  AND    S2H.INSPITEMID = '0257'
  LEFT   JOIN INSPSPECDETAIL S2C
  ON     IM.ITEMID = S2C.RESOURCEID
  AND    IM.ITEMVERSION = S2C.RESOURCEVERSION
  AND    IM.COPPER2_SEGMENT = S2C.PROCESSSEGID
  AND    S2C.INSPITEMID = '0258'
  LEFT   JOIN INSPSPECDETAIL S2D
  ON     IM.ITEMID = S2D.RESOURCEID
  AND    IM.ITEMVERSION = S2D.RESOURCEVERSION
  AND    IM.COPPER2_SEGMENT = S2D.PROCESSSEGID
  AND    S2D.INSPITEMID = '0259'
  LEFT   JOIN INSPSPECDETAIL S2O
  ON     IM.ITEMID = S2O.RESOURCEID
  AND    IM.ITEMVERSION = S2O.RESOURCEVERSION
  AND    IM.COPPER2_SEGMENT = S2O.PROCESSSEGID
  AND    S2O.INSPITEMID = '0256'
  LEFT   JOIN BAS_PROCESSSEGMENT P2
  ON     IM.COPPER2_SEGMENT = P2.PROCESSSEGMENTID
  AND    P2.PROCESSSEGMENTVERSION = '*'
  LEFT   JOIN CMD_DICTIONARY D2
  ON     P2.PROCESSSEGMENTNAME = D2.DICTIONARYID
  AND    D2.LANGUAGETYPE = 'ko-KR'
  --내층동도금3
  LEFT   JOIN INSPSPECDETAIL S3
  ON     IM.ITEMID = S3.RESOURCEID
  AND    IM.ITEMVERSION = S3.RESOURCEVERSION
  AND    IM.COPPER3_SEGMENT = S3.PROCESSSEGID
  AND    S3.RN = 1
  LEFT   JOIN INSPSPECDETAIL S3H
  ON     IM.ITEMID = S3H.RESOURCEID
  AND    IM.ITEMVERSION = S3H.RESOURCEVERSION
  AND    IM.COPPER3_SEGMENT = S3H.PROCESSSEGID
  AND    S3H.INSPITEMID = '0257'
  LEFT   JOIN INSPSPECDETAIL S3C
  ON     IM.ITEMID = S3C.RESOURCEID
  AND    IM.ITEMVERSION = S3C.RESOURCEVERSION
  AND    IM.COPPER3_SEGMENT = S3C.PROCESSSEGID
  AND    S3C.INSPITEMID = '0258'
  LEFT   JOIN INSPSPECDETAIL S3D
  ON     IM.ITEMID = S3D.RESOURCEID
  AND    IM.ITEMVERSION = S3D.RESOURCEVERSION
  AND    IM.COPPER3_SEGMENT = S3D.PROCESSSEGID
  AND    S3D.INSPITEMID = '0259'
  LEFT   JOIN INSPSPECDETAIL S3O
  ON     IM.ITEMID = S3O.RESOURCEID
  AND    IM.ITEMVERSION = S3O.RESOURCEVERSION
  AND    IM.COPPER3_SEGMENT = S3O.PROCESSSEGID
  AND    S3O.INSPITEMID = '0256'
  LEFT   JOIN BAS_PROCESSSEGMENT P3
  ON     IM.COPPER3_SEGMENT = P3.PROCESSSEGMENTID
  AND    P3.PROCESSSEGMENTVERSION = '*'
  LEFT   JOIN CMD_DICTIONARY D3
  ON     P3.PROCESSSEGMENTNAME = D3.DICTIONARYID
  AND    D3.LANGUAGETYPE = 'ko-KR'
  --표면도금1
  LEFT   JOIN INSPSPECDETAIL S1S1
  ON     IM.ITEMID = S1S1.RESOURCEID
  AND    IM.ITEMVERSION = S1S1.RESOURCEVERSION
  AND    IM.SURFACE1_SEGMENT = S1S1.PROCESSSEGID
  AND    S1S1.RN = 1
  LEFT   JOIN INSPSPECDETAIL S1S2
  ON     IM.ITEMID = S1S2.RESOURCEID
  AND    IM.ITEMVERSION = S1S2.RESOURCEVERSION
  AND    IM.SURFACE1_SEGMENT = S1S2.PROCESSSEGID
  AND    S1S2.RN = 2
  LEFT   JOIN INSPSPECDETAIL S1S3
  ON     IM.ITEMID = S1S3.RESOURCEID
  AND    IM.ITEMVERSION = S1S3.RESOURCEVERSION
  AND    IM.SURFACE1_SEGMENT = S1S3.PROCESSSEGID
  AND    S1S3.RN = 3
  LEFT   JOIN BAS_PROCESSSEGMENT PS1
  ON     IM.SURFACE1_SEGMENT = PS1.PROCESSSEGMENTID
  AND    PS1.PROCESSSEGMENTVERSION = '*'
  LEFT   JOIN CMD_DICTIONARY DS1
  ON     PS1.PROCESSSEGMENTNAME = DS1.DICTIONARYID
  AND    DS1.LANGUAGETYPE = 'ko-KR'
  --표면도금2
  LEFT   JOIN INSPSPECDETAIL S2S1
  ON     IM.ITEMID = S2S1.RESOURCEID
  AND    IM.ITEMVERSION = S2S1.RESOURCEVERSION
  AND    IM.SURFACE2_SEGMENT = S2S1.PROCESSSEGID
  AND    S2S1.RN = 1
  LEFT   JOIN INSPSPECDETAIL S2S2
  ON     IM.ITEMID = S2S2.RESOURCEID
  AND    IM.ITEMVERSION = S2S2.RESOURCEVERSION
  AND    IM.SURFACE2_SEGMENT = S2S2.PROCESSSEGID
  AND    S2S2.RN = 2
  LEFT   JOIN INSPSPECDETAIL S2S3
  ON     IM.ITEMID = S2S3.RESOURCEID
  AND    IM.ITEMVERSION = S2S3.RESOURCEVERSION
  AND    IM.SURFACE2_SEGMENT = S2S3.PROCESSSEGID
  AND    S2S3.RN = 3
  LEFT   JOIN BAS_PROCESSSEGMENT PS2
  ON     IM.SURFACE2_SEGMENT = PS2.PROCESSSEGMENTID
  AND    PS2.PROCESSSEGMENTVERSION = '*'
  LEFT   JOIN CMD_DICTIONARY DS2
  ON     PS2.PROCESSSEGMENTNAME = DS2.DICTIONARYID
  AND    DS2.LANGUAGETYPE = 'ko-KR'
  --표면도금3
  LEFT   JOIN INSPSPECDETAIL S3S1
  ON     IM.ITEMID = S3S1.RESOURCEID
  AND    IM.ITEMVERSION = S3S1.RESOURCEVERSION
  AND    IM.SURFACE3_SEGMENT = S3S1.PROCESSSEGID
  AND    S3S1.RN = 1
  LEFT   JOIN INSPSPECDETAIL S3S2
  ON     IM.ITEMID = S3S2.RESOURCEID
  AND    IM.ITEMVERSION = S3S2.RESOURCEVERSION
  AND    IM.SURFACE3_SEGMENT = S3S2.PROCESSSEGID
  AND    S3S2.RN = 2
  LEFT   JOIN INSPSPECDETAIL S3S3
  ON     IM.ITEMID = S3S3.RESOURCEID
  AND    IM.ITEMVERSION = S3S3.RESOURCEVERSION
  AND    IM.SURFACE3_SEGMENT = S3S3.PROCESSSEGID
  AND    S3S3.RN = 3
  LEFT   JOIN BAS_PROCESSSEGMENT PS3
  ON     IM.SURFACE3_SEGMENT = PS3.PROCESSSEGMENTID
  AND    PS3.PROCESSSEGMENTVERSION = '*'
  LEFT   JOIN CMD_DICTIONARY DS3
  ON     PS3.PROCESSSEGMENTNAME = DS3.DICTIONARYID
  AND    DS3.LANGUAGETYPE = 'ko-KR'
  LEFT   JOIN CMD_DICTIONARY LSL
  ON     LSL.DICTIONARYID = 'LSL'
  AND    LSL.LANGUAGETYPE = 'ko-KR'
  LEFT   JOIN CMD_DICTIONARY USL
  ON     USL.DICTIONARYID = 'USL'
  AND    USL.LANGUAGETYPE = 'ko-KR')
SELECT *
FROM   (
        SELECT PV2.*
              ,TO_CHAR(PV2.SURFACE1_NI_LOWER_TEMP) AS SURFACE1_NI_LOWER
              ,TO_CHAR(PV2.SURFACE1_NI_UPPER_TEMP) AS SURFACE1_NI_UPPER
              ,TO_CHAR(PV2.SURFACE1_AU_LOWER_TEMP) AS SURFACE1_AU_LOWER
              ,TO_CHAR(PV2.SURFACE1_AU_UPPER_TEMP) AS SURFACE1_AU_UPPER
              ,TO_CHAR(PV2.SURFACE1_PD_LOWER_TEMP) AS SURFACE1_PD_LOWER
              ,TO_CHAR(PV2.SURFACE1_PD_UPPER_TEMP) AS SURFACE1_PD_UPPER
              ,TO_CHAR(PV2.SURFACE2_NI_LOWER_TEMP) AS SURFACE2_NI_LOWER
              ,TO_CHAR(PV2.SURFACE2_NI_UPPER_TEMP) AS SURFACE2_NI_UPPER
              ,TO_CHAR(PV2.SURFACE2_AU_LOWER_TEMP) AS SURFACE2_AU_LOWER
              ,TO_CHAR(PV2.SURFACE2_AU_UPPER_TEMP) AS SURFACE2_AU_UPPER
              ,TO_CHAR(PV2.SURFACE2_PD_LOWER_TEMP) AS SURFACE2_PD_LOWER
              ,TO_CHAR(PV2.SURFACE2_PD_UPPER_TEMP) AS SURFACE2_PD_UPPER
              ,TO_CHAR(PV2.SURFACE3_NI_LOWER_TEMP) AS SURFACE3_NI_LOWER
              ,TO_CHAR(PV2.SURFACE3_NI_UPPER_TEMP) AS SURFACE3_NI_UPPER
              ,TO_CHAR(PV2.SURFACE3_AU_LOWER_TEMP) AS SURFACE3_AU_LOWER
              ,TO_CHAR(PV2.SURFACE3_AU_UPPER_TEMP) AS SURFACE3_AU_UPPER
              ,TO_CHAR(PV2.SURFACE3_PD_LOWER_TEMP) AS SURFACE3_PD_LOWER
              ,TO_CHAR(PV2.SURFACE3_PD_UPPER_TEMP) AS SURFACE3_PD_UPPER        
        FROM   PRODUCTVIEW PV2) X
 WHERE 1=1
 <if test="PLATINGTYPE != null and PLATINGTYPE !='' ">
		AND (X.SURFACE1_SEGMENT LIKE #{PLATINGTYPE} || '%'
			OR X.SURFACE2_SEGMENT LIKE #{PLATINGTYPE} || '%'
			OR X.SURFACE3_SEGMENT LIKE #{PLATINGTYPE} || '%'
		)		
</if>
 <if test="COPPERPLATINGTYPE != null and COPPERPLATINGTYPE !='' ">
		AND (X.COPPER1_SEGMENT LIKE #{COPPERPLATINGTYPE} || '%'
			OR X.COPPER2_SEGMENT LIKE #{COPPERPLATINGTYPE} || '%'
			OR X.COPPER3_SEGMENT LIKE #{COPPERPLATINGTYPE} || '%'
			OR X.COPPER4_SEGMENT LIKE #{COPPERPLATINGTYPE} || '%'
		)		
</if>
		
ORDER  BY X.ITEMID
         ,X.CUSTOMERREV
         ,X.ITEMVERSION
    </select>
</mapper>